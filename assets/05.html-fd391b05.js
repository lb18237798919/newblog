import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as p,c as o,e as l,a as t,b as s,d as e}from"./app-1c846d8b.js";const u={},r={href:"https://uniapp.dcloud.io/platform",target:"_blank",rel:"noopener noreferrer"},d={href:"https://www.html5plus.org/doc/h5p.html",target:"_blank",rel:"noopener noreferrer"},k={href:"http://ask.dcloud.net.cn/article/35408",target:"_blank",rel:"noopener noreferrer"},m={href:"https://uniapp.dcloud.net.cn/api/#vue-2-%E5%92%8C-vue-3-%E7%9A%84-api-promise-%E5%8C%96",target:"_blank",rel:"noopener noreferrer"},g={href:"https://uniapp.dcloud.net.cn/api/request/request.html#configmtls",target:"_blank",rel:"noopener noreferrer"},v={href:"https://uniapp.dcloud.net.cn/api/#promise-%E5%B0%81%E8%A3%85",target:"_blank",rel:"noopener noreferrer"},f={style:{"text-align":"left"}},b={href:"https://developers.weixin.qq.com/miniprogram/dev/api/RequestTask.offHeadersReceived.html",target:"_blank",rel:"noopener noreferrer"},y={style:{"text-align":"left"}},T={href:"https://developers.weixin.qq.com/miniprogram/dev/api/RequestTask.onHeadersReceived.html",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://juejin.im/user/2612095359650712",target:"_blank",rel:"noopener noreferrer"},x={href:"https://uniapp.dcloud.net.cn/collocation/manifest#networktimeout",target:"_blank",rel:"noopener noreferrer"},h={href:"https://ask.dcloud.net.cn/article/35267",target:"_blank",rel:"noopener noreferrer"},w={href:"https://github.com/charleslo1/weapp-cookie",target:"_blank",rel:"noopener noreferrer"},j={href:"https://uniapp.dcloud.net.cn/api/router.html#navigateto",target:"_blank",rel:"noopener noreferrer"},q={style:{"text-align":"left"}},A={href:"https://uniapp.dcloud.net.cn/api/router#animation",target:"_blank",rel:"noopener noreferrer"},P={href:"http://www.html5plus.org/doc/zh_cn/runtime.html#plus.runtime.openURL",target:"_blank",rel:"noopener noreferrer"},B={href:"https://uniapp.dcloud.net.cn/api/preload-page",target:"_blank",rel:"noopener noreferrer"},C={href:"https://uniapp.dcloud.net.cn/api/preload-page",target:"_blank",rel:"noopener noreferrer"},L={style:{"text-align":"left"}},H={href:"https://uniapp.dcloud.net.cn/api/router#animation",target:"_blank",rel:"noopener noreferrer"},M={id:"eventchannel-emit-string-eventname-any-args",tabindex:"-1"},S={href:"https://uniapp.dcloud.net.cn/api/router.html#eventchannel-emit",target:"_blank",rel:"noopener noreferrer"},D={id:"eventchannel-off-string-eventname-function-fn",tabindex:"-1"},E={href:"https://uniapp.dcloud.net.cn/api/router.html#eventchannel-off",target:"_blank",rel:"noopener noreferrer"},O={id:"eventchannel-on-string-eventname-function-fn",tabindex:"-1"},Z={href:"https://uniapp.dcloud.net.cn/api/router.html#eventchannel-on",target:"_blank",rel:"noopener noreferrer"},I={id:"eventchannel-once-string-eventname-function-fn",tabindex:"-1"},J={href:"https://uniapp.dcloud.net.cn/api/router.html#eventchannel-once",target:"_blank",rel:"noopener noreferrer"},F={href:"https://ext.dcloud.net.cn/search?q=%E8%B7%AF%E7%94%B1",target:"_blank",rel:"noopener noreferrer"},R={href:"https://uniapp.dcloud.net.cn/api/ui/prompt.html#showtoast",target:"_blank",rel:"noopener noreferrer"},N={href:"https://uniapp.dcloud.net.cn/api/ui/prompt#hideloading",target:"_blank",rel:"noopener noreferrer"},z={href:"https://uniapp.dcloud.net.cn/api/ui/prompt.html#showmodal",target:"_blank",rel:"noopener noreferrer"},V={href:"https://uniapp.dcloud.net.cn/api/ui/prompt.html#showactionsheet",target:"_blank",rel:"noopener noreferrer"},$={href:"https://uniapp.dcloud.net.cn/tutorial/page.html#lifecycle",target:"_blank",rel:"noopener noreferrer"},G={id:"_5-2-2-uni-startpulldownrefresh",tabindex:"-1"},K={href:"https://uniapp.dcloud.net.cn/api/ui/pulldown.html#startpulldownrefresh",target:"_blank",rel:"noopener noreferrer"},U={id:"_5-2-3-uni-stoppulldownrefresh",tabindex:"-1"},X={href:"https://uniapp.dcloud.net.cn/api/ui/pulldown.html#stoppulldownrefresh",target:"_blank",rel:"noopener noreferrer"},Y={class:"MathJax",jax:"SVG",style:{position:"relative"}},W={style:{"vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.962ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 4845 950","aria-hidden":"true"},_={class:"MathJax",jax:"SVG",style:{position:"relative"}},nn={style:{"vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"10.812ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 4779 950","aria-hidden":"true"},tn={class:"MathJax",jax:"SVG",style:{position:"relative"}},sn={style:{"vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.045ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 14164 950","aria-hidden":"true"},an={class:"MathJax",jax:"SVG",style:{position:"relative"}},en={style:{"vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"29.14ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 12880 950","aria-hidden":"true"};function ln(pn,n){const a=c("ExternalLinkIcon");return p(),o("div",null,[n[144]||(n[144]=l('<h1 id="_05-【uni-app的api】" tabindex="-1"><a class="header-anchor" href="#_05-【uni-app的api】" aria-hidden="true">#</a> 05 【uni-app的API】</h1><h2 id="_1-概述" tabindex="-1"><a class="header-anchor" href="#_1-概述" aria-hidden="true">#</a> 1.概述</h2><p><code>uni-app</code>的 js API 由标准 ECMAScript 的 js API 和 uni 扩展 API 这两部分组成。</p><p>标准 ECMAScript 的 js 仅是最基础的 js。浏览器基于它扩展了 window、document、navigator 等对象。小程序也基于标准 js 扩展了各种 wx.xx、my.xx、swan.xx 的 API。node 也扩展了 fs 等模块。</p><p>uni-app 基于 ECMAScript 扩展了 uni 对象，并且 API 命名与小程序保持兼容。</p><h3 id="_1-1-标准-js-和浏览器-js-的区别" tabindex="-1"><a class="header-anchor" href="#_1-1-标准-js-和浏览器-js-的区别" aria-hidden="true">#</a> 1.1 标准 js 和浏览器 js 的区别</h3><p><code>uni-app</code>的 js 代码，web端运行于浏览器中。非web端（包含小程序和 App），Android 平台运行在 v8 引擎中，iOS 平台运行在 iOS 自带的 jscore 引擎中，都没有运行在浏览器或 webview 里。</p><p>非web端，虽然不支持 window、document、navigator 等浏览器的 js API，但也支持标准 ECMAScript。</p><p>请注意不要把浏览器里的 js 等价于标准 js。</p><p>所以 uni-app 的web端，一样支持标准 js，支持 if、for 等语法，支持字符串、数字、时间、布尔值、数组、自定义对象等变量类型及各种处理方法。仅仅是不支持 window、document、navigator 等浏览器专用对象。</p><h3 id="_1-2-各端特色-api-调用" tabindex="-1"><a class="header-anchor" href="#_1-2-各端特色-api-调用" aria-hidden="true">#</a> 1.2 各端特色 API 调用</h3>',11)),t("p",null,[n[1]||(n[1]=s("除了 uni-app 框架内置的跨端 API，各端自己的特色 API 也可通过")),t("a",r,[n[0]||(n[0]=s("条件编译 (opens new window)")),e(a)]),n[2]||(n[2]=s("自由使用。"))]),t("p",null,[n[5]||(n[5]=s("各端特色 API 规范参考各端的开发文档。其中 App 端的 JS API 参考")),t("a",d,[n[3]||(n[3]=s("html5plus.org (opens new window)")),e(a)]),n[6]||(n[6]=s("；uni-app 也支持通过扩展原生插件来丰富 App 端的开发能力，具体参考")),t("a",k,[n[4]||(n[4]=s("插件开发文档(opens new window)")),e(a)])]),n[145]||(n[145]=l(`<p>各平台的 API 新增，不需要 uni-app 升级，开发者就可以直接使用。</p><h3 id="_1-3-说明" tabindex="-1"><a class="header-anchor" href="#_1-3-说明" aria-hidden="true">#</a> 1.3 说明</h3><ul><li>uni.on 开头的 API 是监听某个事件发生的 API 接口，接受一个 CALLBACK 函数作为参数。当该事件触发时，会调用 CALLBACK 函数。</li><li>如未特殊约定，其他 API 接口都接受一个 OBJECT 作为参数。</li><li>OBJECT 中可以指定 success，fail，complete 来接收接口调用结果。</li><li><strong>平台差异说明</strong>若无特殊说明，则表示所有平台均支持。</li><li>异步 API 会返回 <code>errMsg</code> 字段，同步 API 则不会。比如：<code>getSystemInfoSync</code> 在返回结果中不会有 <code>errMsg</code>。</li></ul><h3 id="_1-4-api-promise-化" tabindex="-1"><a class="header-anchor" href="#_1-4-api-promise-化" aria-hidden="true">#</a> 1.4 API Promise 化</h3><ol><li><p>具体 API <code>Promise 化</code> 的策略：</p><ul><li><p>异步的方法，如果不传入 success、fail、complete 等 callback 参数，将以 Promise 返回数据。例如：<code>uni.getImageInfo()</code></p></li><li><p>异步的方法，且有返回对象，如果希望获取返回对象，必须至少传入一项 success、fail、complete 等 callback 参数。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token comment">// 正常使用</span>
 <span class="token keyword">const</span> task <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">connectSocket</span><span class="token punctuation">(</span>
  <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">)</span>

 <span class="token comment">// Promise 化</span>
 uni<span class="token punctuation">.</span><span class="token function">connectSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">// 此处即为正常使用时 success 回调的 res</span>
   <span class="token comment">// uni.connectSocket() 正常使用时是会返回 task 对象的，如果想获取 task ，则不要使用 Promise 化</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>不进行 <code>Promise 化</code> 的 API：</p><ul><li>同步的方法（即以 sync 结束）。例如：<code>uni.getSystemInfoSync()</code></li><li>以 create 开头的方法。例如：<code>uni.createMapContext()</code></li><li>以 manager 结束的方法。例如：<code>uni.getBackgroundAudioManager()</code></li></ul></li></ol><h3 id="_1-5-vue-2-和-vue-3-的-api-promise化" tabindex="-1"><a class="header-anchor" href="#_1-5-vue-2-和-vue-3-的-api-promise化" aria-hidden="true">#</a> 1.5 Vue 2 和 Vue 3 的 API Promise化</h3>`,6)),t("p",null,[t("a",m,[n[7]||(n[7]=s("uni-app官网 (dcloud.net.cn)")),e(a)])]),n[146]||(n[146]=l(`<blockquote><p>Vue 2 和 Vue 3 项目中 <code>API Promise 化</code> 返回格式不一致，以下为 <code>不同点</code> 和 <code>返回格式互相转换</code></p></blockquote><ul><li><p>不同点</p><ul><li>Vue2 对部分 API 进行了 Promise 封装，返回数据的第一个参数是错误对象，第二个参数是返回数据。此时使用 <code>catch</code> 是拿不到报错信息的，因为内部对错误进行了拦截。</li><li>Vue3 对部分 API 进行了 Promise 封装，调用成功会进入 <code>then 方法</code> 回调。调用失败会进入 <code>catch 方法</code> 回调</li></ul><p><strong>使用示例：</strong></p></li></ul><p><code>vue2</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 默认方式</span>
uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Promise</span>
uni
  <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// data为一个数组</span>
    <span class="token comment">// 数组第一项为错误信息 即为 fail 回调</span>
    <span class="token comment">// 第二项为返回数据</span>
    <span class="token keyword">var</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Await</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>vue3</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 默认方式</span>
uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 Promise then/catch 方式调用</span>
uni
  <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此处的 res 参数，与使用默认方式调用时 success 回调中的 res 参数一致</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此处的 err 参数，与使用默认方式调用时 fail 回调中的 err 参数一致</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 Async/Await 方式调用</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token keyword">await</span> uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://www.example.com/request&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 此处的 res 参数，与使用默认方式调用时 success 回调中的 res 参数一致</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此处的 err 参数，与使用默认方式调用时 fail 回调中的 err 参数一致</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-网络" tabindex="-1"><a class="header-anchor" href="#_2-网络" aria-hidden="true">#</a> 2.网络</h2><h3 id="_2-1-发起请求" tabindex="-1"><a class="header-anchor" href="#_2-1-发起请求" aria-hidden="true">#</a> 2.1 发起请求</h3><h4 id="_2-1-1-uni-request-object" tabindex="-1"><a class="header-anchor" href="#_2-1-1-uni-request-object" aria-hidden="true">#</a> 2.1.1 uni.request(OBJECT)</h4>`,9)),t("p",null,[t("a",g,[n[8]||(n[8]=s("uni.request(OBJECT) | uni-app官网 (dcloud.net.cn)")),e(a)])]),n[147]||(n[147]=l(`<p>发起网络请求。</p><blockquote><p>在各个小程序平台运行时，网络相关的 API 在使用前需要配置域名白名单。</p></blockquote><blockquote><p><strong>success等等函数最好都要用箭头函数，不然拿不到this指定的data数据！</strong></p></blockquote><p><strong>OBJECT 参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">url</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;"></td><td style="text-align:left;">开发者服务器接口地址</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object/String/ArrayBuffer</td><td style="text-align:left;">否</td><td style="text-align:left;"></td><td style="text-align:left;">请求的参数</td><td style="text-align:left;">App 3.3.7 以下不支持 ArrayBuffer 类型</td></tr><tr><td style="text-align:left;">header</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;"></td><td style="text-align:left;">设置请求的 header，header 中不能设置 Referer。</td><td style="text-align:left;">App、H5端会自动带上cookie，且H5端不可手动修改</td></tr><tr><td style="text-align:left;">method</td><td style="text-align:left;">String</td><td style="text-align:left;">否</td><td style="text-align:left;">GET</td><td style="text-align:left;">有效值详见下方说明</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">timeout</td><td style="text-align:left;">Number</td><td style="text-align:left;">否</td><td style="text-align:left;">60000</td><td style="text-align:left;">超时时间，单位 ms</td><td style="text-align:left;">H5(HBuilderX 2.9.9+)、APP(HBuilderX 2.9.9+)、微信小程序（2.10.0）、支付宝小程序</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;"></td><td style="text-align:left;">收到开发者服务器成功返回的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;"></td><td style="text-align:left;">接口调用失败的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;"></td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td><td style="text-align:left;"></td></tr></tbody></table><p><strong>success 返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object/String/ArrayBuffer</td><td style="text-align:left;">开发者服务器返回的数据</td></tr><tr><td style="text-align:left;">statusCode</td><td style="text-align:left;">Number</td><td style="text-align:left;">开发者服务器返回的 HTTP 状态码</td></tr><tr><td style="text-align:left;">header</td><td style="text-align:left;">Object</td><td style="text-align:left;">开发者服务器返回的 HTTP Response Header</td></tr><tr><td style="text-align:left;">cookies</td><td style="text-align:left;"><code>Array.&lt;string&gt;</code></td><td style="text-align:left;">开发者服务器返回的 cookies，格式为字符串数组</td></tr></tbody></table><p><strong>data 数据说明</strong></p><p>最终发送给服务器的数据是 String 类型，如果传入的 data 不是 String 类型，会被转换成 String。转换规则如下：</p><ul><li>对于 <code>GET</code> 方法，会将数据转换为 query string。例如 <code>{ name: &#39;name&#39;, age: 18 }</code> 转换后的结果是 <code>name=name&amp;age=18</code>。</li><li>对于 <code>POST</code> 方法且 <code>header[&#39;content-type&#39;]</code> 为 <code>application/json</code> 的数据，会进行 JSON 序列化。</li><li>对于 <code>POST</code> 方法且 <code>header[&#39;content-type&#39;]</code> 为 <code>application/x-www-form-urlencoded</code> 的数据，会将数据转换为 query string。</li></ul><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;https://www.example.com/request&#39;</span><span class="token punctuation">,</span> <span class="token comment">//仅为示例，并非真实接口地址。</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;uni.request&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;custom-header&#39;</span><span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span> <span class="token comment">//自定义请求头信息</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&#39;request success&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在页面刚加载的时候就请求数据 需要在页面的<code>onLoad</code>事件中调用获取数据的函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token doc-comment comment">/**
   * 生命周期函数--监听页面加载
   */</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>返回值</strong></p><p>如果希望返回一个 <code>requestTask</code> 对象，需要至少传入 success / fail / complete 参数中的一个。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> requestTask <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;https://www.example.com/request&#39;</span><span class="token punctuation">,</span> <span class="token comment">//仅为示例，并非真实接口地址。</span>
	<span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
requestTask<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17)),t("p",null,[n[10]||(n[10]=s("如果没有传入 success / fail / complete 参数，则会返回封装后的 Promise 对象：")),t("a",v,[n[9]||(n[9]=s("Promise 封装")),e(a)])]),n[148]||(n[148]=t("p",null,[s("通过 "),t("code",null,"requestTask"),s("，可中断请求任务。")],-1)),n[149]||(n[149]=t("p",null,[t("strong",null,"requestTask 对象的方法列表")],-1)),t("table",null,[n[24]||(n[24]=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"方法"),t("th",{style:{"text-align":"left"}},"参数"),t("th",{style:{"text-align":"left"}},"说明")])],-1)),t("tbody",null,[n[23]||(n[23]=t("tr",null,[t("td",{style:{"text-align":"left"}},"abort"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"中断请求任务")],-1)),t("tr",null,[n[15]||(n[15]=t("td",{style:{"text-align":"left"}},"offHeadersReceived",-1)),n[16]||(n[16]=t("td",{style:{"text-align":"left"}},null,-1)),t("td",f,[n[12]||(n[12]=s("取消监听 HTTP Response Header 事件，仅")),n[13]||(n[13]=t("code",null,"微信小程序平台",-1)),n[14]||(n[14]=s("支持，")),t("a",b,[n[11]||(n[11]=s("文档详情(opens new window)")),e(a)])])]),t("tr",null,[n[21]||(n[21]=t("td",{style:{"text-align":"left"}},"onHeadersReceived",-1)),n[22]||(n[22]=t("td",{style:{"text-align":"left"}},null,-1)),t("td",y,[n[18]||(n[18]=s("监听 HTTP Response Header 事件。会比请求完成事件更早，仅")),n[19]||(n[19]=t("code",null,"微信小程序平台",-1)),n[20]||(n[20]=s("支持，")),t("a",T,[n[17]||(n[17]=s("文档详情(opens new window)")),e(a)])])])])]),n[150]||(n[150]=l(`<p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> requestTask <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;https://www.example.com/request&#39;</span><span class="token punctuation">,</span> <span class="token comment">//仅为示例，并非真实接口地址。</span>
	<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 中断请求任务</span>
requestTask<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Tips</strong></p>`,3)),t("ul",null,[n[42]||(n[42]=t("li",null,[t("p",null,[s("请求的 "),t("code",null,"header"),s(" 中 "),t("code",null,"content-type"),s(" 默认为 "),t("code",null,"application/json"),s("。")])],-1)),t("li",null,[t("p",null,[n[26]||(n[26]=s("避免在 ")),n[27]||(n[27]=t("code",null,"header",-1)),n[28]||(n[28]=s(" 中使用中文，或者使用 encodeURIComponent 进行编码，否则在百度小程序报错。（来自：")),t("a",Q,[n[25]||(n[25]=s("快狗打车前端团队 (opens new window)")),e(a)]),n[29]||(n[29]=s("）"))])]),t("li",null,[t("p",null,[n[31]||(n[31]=s("网络请求的 ")),n[32]||(n[32]=t("code",null,"超时时间",-1)),n[33]||(n[33]=s(" 可以统一在 ")),n[34]||(n[34]=t("code",null,"manifest.json",-1)),n[35]||(n[35]=s(" 中配置 ")),t("a",x,[n[30]||(n[30]=s("networkTimeout")),e(a)]),n[36]||(n[36]=s("。"))])]),t("li",null,[t("p",null,[n[38]||(n[38]=s("H5 端本地调试需注意跨域问题，参考：")),t("a",h,[n[37]||(n[37]=s("调试跨域问题解决方案")),e(a)])])]),t("li",null,[t("p",null,[n[40]||(n[40]=s("注意小程序端不支持自动保持 cookie，服务器应避免验证 cookie。如果服务器无法修改，也可以使用一些模拟手段，比如这样的工具")),t("a",w,[n[39]||(n[39]=s("https://github.com/charleslo1/weapp-cookie (opens new window)")),e(a)]),n[41]||(n[41]=s("可以请求时带上 cookie 并将响应的 cookie 保存在本地。"))])]),n[43]||(n[43]=t("li",null,[t("p",null,"H5端 cookie 受跨域限制（和平时开发网站时一样），旧版的 uni.request 未支持 withCredentials 配置，可以直接使用 xhr 对象或者其他类库。")],-1))]),n[151]||(n[151]=t("h2",{id:"_3-路由和页面跳转",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_3-路由和页面跳转","aria-hidden":"true"},"#"),s(" 3.路由和页面跳转")],-1)),n[152]||(n[152]=t("h3",{id:"_3-1-uni-navigateto-object",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_3-1-uni-navigateto-object","aria-hidden":"true"},"#"),s(" 3.1 uni.navigateTo(OBJECT)")],-1)),t("p",null,[t("a",j,[n[44]||(n[44]=s("uni.navigateTo(OBJECT) | uni-app官网 (dcloud.net.cn)")),e(a)])]),n[153]||(n[153]=t("p",null,[s("保留当前页面，跳转到应用内的某个页面，使用"),t("code",null,"uni.navigateBack"),s("可以返回到原页面。")],-1)),t("table",null,[n[58]||(n[58]=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"参数"),t("th",{style:{"text-align":"left"}},"类型"),t("th",{style:{"text-align":"left"}},"必填"),t("th",{style:{"text-align":"left"}},"默认值"),t("th",{style:{"text-align":"left"}},"说明"),t("th",{style:{"text-align":"left"}},"平台差异说明")])],-1)),t("tbody",null,[n[52]||(n[52]=t("tr",null,[t("td",{style:{"text-align":"left"}},"url"),t("td",{style:{"text-align":"left"}},"String"),t("td",{style:{"text-align":"left"}},"是"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"需要跳转的应用内非 tabBar 的页面的路径 , 路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&分隔；如 'path?key=value&key2=value2'，path为下一个页面的路径，下一个页面的onLoad函数可得到传递的参数"),t("td",{style:{"text-align":"left"}})],-1)),t("tr",null,[n[47]||(n[47]=t("td",{style:{"text-align":"left"}},"animationType",-1)),n[48]||(n[48]=t("td",{style:{"text-align":"left"}},"String",-1)),n[49]||(n[49]=t("td",{style:{"text-align":"left"}},"否",-1)),n[50]||(n[50]=t("td",{style:{"text-align":"left"}},"pop-in",-1)),t("td",q,[n[46]||(n[46]=s("窗口显示的动画效果，详见：")),t("a",A,[n[45]||(n[45]=s("窗口动画")),e(a)])]),n[51]||(n[51]=t("td",{style:{"text-align":"left"}},"App",-1))]),n[53]||(n[53]=t("tr",null,[t("td",{style:{"text-align":"left"}},"animationDuration"),t("td",{style:{"text-align":"left"}},"Number"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"300"),t("td",{style:{"text-align":"left"}},"窗口动画持续时间，单位为 ms"),t("td",{style:{"text-align":"left"}},"App")],-1)),n[54]||(n[54]=t("tr",null,[t("td",{style:{"text-align":"left"}},"events"),t("td",{style:{"text-align":"left"}},"Object"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"页面间通信接口，用于监听被打开页面发送到当前页面的数据。2.8.9+ 开始支持。"),t("td",{style:{"text-align":"left"}})],-1)),n[55]||(n[55]=t("tr",null,[t("td",{style:{"text-align":"left"}},"success"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"接口调用成功的回调函数"),t("td",{style:{"text-align":"left"}})],-1)),n[56]||(n[56]=t("tr",null,[t("td",{style:{"text-align":"left"}},"fail"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"接口调用失败的回调函数"),t("td",{style:{"text-align":"left"}})],-1)),n[57]||(n[57]=t("tr",null,[t("td",{style:{"text-align":"left"}},"complete"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}},"接口调用结束的回调函数（调用成功、失败都会执行）"),t("td",{style:{"text-align":"left"}})],-1))])]),n[154]||(n[154]=l(`<p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//在起始页面跳转到test.vue页面并传递参数</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;pages/test?id=1&amp;name=uniapp&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 在test.vue页面接受参数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//option为object类型，会序列化上个页面传递的参数</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印出上个页面传递的参数。</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印出上个页面传递的参数。</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 在起始页面跳转到test.vue页面，并监听test.vue发送过来的事件数据</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;pages/test?id=1&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为指定事件添加一个监听器，获取被打开页面传送到当前页面的数据</span>
    <span class="token function-variable function">acceptDataFromOpenedPage</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">someEvent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过eventChannel向被打开页面传送数据</span>
    res<span class="token punctuation">.</span>eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;acceptDataFromOpenerPage&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;data from starter page&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 在test.vue页面，向起始页通过事件传递数据</span>
<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eventChannel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenerEventChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;acceptDataFromOpenedPage&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;data from test page&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;someEvent&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;data from test page for someEvent&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 监听acceptDataFromOpenerPage事件，获取上一页面通过eventChannel传送到当前页面的数据</span>
  eventChannel<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;acceptDataFromOpenerPage&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：</strong></p>`,5)),t("ul",null,[n[62]||(n[62]=t("li",null,"页面跳转路径有层级限制，不能无限制跳转新页面",-1)),n[63]||(n[63]=t("li",null,"跳转到 tabBar 页面只能使用 switchTab 跳转",-1)),t("li",null,[n[60]||(n[60]=s("路由API的目标页面必须是在pages.json里注册的vue页面。如果想打开web url，在App平台可以使用 ")),t("a",P,[n[59]||(n[59]=s("plus.runtime.openURL (opens new window)")),e(a)]),n[61]||(n[61]=s("或web-view组件；H5平台使用 window.open；小程序平台使用web-view组件（url需在小程序的联网白名单中）。在hello uni-app中有个组件ulink.vue已对多端进行封装，可参考。"))])]),n[155]||(n[155]=l(`<h3 id="_3-2-uni-redirectto-object" tabindex="-1"><a class="header-anchor" href="#_3-2-uni-redirectto-object" aria-hidden="true">#</a> 3.2 uni.redirectTo(OBJECT)</h3><p>关闭当前页面，跳转到应用内的某个页面。</p><p><strong>OBJECT参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">url</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">需要跳转的应用内非 tabBar 的页面的路径，路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&amp;分隔；如 &#39;path?key=value&amp;key2=value2&#39;</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">redirectTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;test?id=1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复制代码</p><p><strong>注意：</strong></p><ul><li>跳转到 tabBar 页面只能使用 switchTab 跳转</li></ul><h3 id="_3-3-uni-relaunch-object" tabindex="-1"><a class="header-anchor" href="#_3-3-uni-relaunch-object" aria-hidden="true">#</a> 3.3 uni.reLaunch(OBJECT)</h3><p>关闭所有页面，打开到应用内的某个页面。</p>`,11)),t("p",null,[n[65]||(n[65]=t("strong",null,"注意：",-1)),n[66]||(n[66]=s(" 如果调用了 ")),t("a",B,[n[64]||(n[64]=s("uni.preloadPage(OBJECT) (opens new window)")),e(a)]),n[67]||(n[67]=s("不会关闭，仅触发生命周期 ")),n[68]||(n[68]=t("code",null,"onHide",-1))]),n[156]||(n[156]=l(`<p><strong>OBJECT参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">url</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">需要跳转的应用内页面路径 , 路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&amp;分隔；如 &#39;path?key=value&amp;key2=value2&#39;，如果跳转的页面路径是 tabBar 页面则不能带参数</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">reLaunch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;test?id=1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tips：</p><ul><li>H5端调用<code>uni.reLaunch</code>之后之前页面栈会销毁，但是无法清空浏览器之前的历史记录，此时<code>navigateBack</code>不能返回，如果存在历史记录的话点击浏览器的返回按钮或者调用<code>history.back()</code>仍然可以导航到浏览器的其他历史记录。</li></ul><h3 id="_3-4-uni-switchtab-object" tabindex="-1"><a class="header-anchor" href="#_3-4-uni-switchtab-object" aria-hidden="true">#</a> 3.4 uni.switchTab(OBJECT)</h3><p>跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。</p>`,9)),t("p",null,[n[70]||(n[70]=t("strong",null,"注意：",-1)),n[71]||(n[71]=s(" 如果调用了 ")),t("a",C,[n[69]||(n[69]=s("uni.preloadPage(OBJECT) (opens new window)")),e(a)]),n[72]||(n[72]=s("不会关闭，仅触发生命周期 ")),n[73]||(n[73]=t("code",null,"onHide",-1))]),n[157]||(n[157]=l(`<p><strong>OBJECT参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">url</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">需要跳转的 tabBar 页面的路径（需在 pages.json 的 tabBar 字段定义的页面），路径后不能带参数</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>示例</strong></p><p>pages.json</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/other/other&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;其他&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>other.vue</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;/pages/index/index&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-uni-navigateback-object" tabindex="-1"><a class="header-anchor" href="#_3-5-uni-navigateback-object" aria-hidden="true">#</a> 3.5 uni.navigateBack(OBJECT)</h3><p>关闭当前页面，返回上一页面或多级页面。可通过 <code>getCurrentPages()</code> 获取当前的页面栈，决定需要返回几层。</p><p><strong>OBJECT参数说明</strong></p>`,10)),t("table",null,[n[86]||(n[86]=t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"参数"),t("th",{style:{"text-align":"left"}},"类型"),t("th",{style:{"text-align":"left"}},"必填"),t("th",{style:{"text-align":"left"}},"默认值"),t("th",{style:{"text-align":"left"}},"说明"),t("th",{style:{"text-align":"left"}},"平台差异说明")])],-1)),t("tbody",null,[n[81]||(n[81]=t("tr",null,[t("td",{style:{"text-align":"left"}},"delta"),t("td",{style:{"text-align":"left"}},"Number"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"1"),t("td",{style:{"text-align":"left"}},"返回的页面数，如果 delta 大于现有页面数，则返回到首页。"),t("td",{style:{"text-align":"left"}})],-1)),t("tr",null,[n[76]||(n[76]=t("td",{style:{"text-align":"left"}},"animationType",-1)),n[77]||(n[77]=t("td",{style:{"text-align":"left"}},"String",-1)),n[78]||(n[78]=t("td",{style:{"text-align":"left"}},"否",-1)),n[79]||(n[79]=t("td",{style:{"text-align":"left"}},"pop-out",-1)),t("td",L,[n[75]||(n[75]=s("窗口关闭的动画效果，详见：")),t("a",H,[n[74]||(n[74]=s("窗口动画")),e(a)])]),n[80]||(n[80]=t("td",{style:{"text-align":"left"}},"App",-1))]),n[82]||(n[82]=t("tr",null,[t("td",{style:{"text-align":"left"}},"animationDuration"),t("td",{style:{"text-align":"left"}},"Number"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"300"),t("td",{style:{"text-align":"left"}},"窗口关闭动画的持续时间，单位为 ms"),t("td",{style:{"text-align":"left"}},"App")],-1)),n[83]||(n[83]=t("tr",null,[t("td",{style:{"text-align":"left"}},"success"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用成功的回调函数"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}})],-1)),n[84]||(n[84]=t("tr",null,[t("td",{style:{"text-align":"left"}},"fail"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用失败的回调函数"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}})],-1)),n[85]||(n[85]=t("tr",null,[t("td",{style:{"text-align":"left"}},"complete"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用结束的回调函数（调用成功、失败都会执行）"),t("td",{style:{"text-align":"left"}}),t("td",{style:{"text-align":"left"}})],-1))])]),n[158]||(n[158]=l(`<p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 注意：调用 navigateTo 跳转时，调用该方法的页面会被加入堆栈，而 redirectTo 方法则不会。见下方示例代码</span>

<span class="token comment">// 此处是A页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;B?id=1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此处是B页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;C?id=1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在C页面内 navigateBack，将返回A页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">delta</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-eventchannel" tabindex="-1"><a class="header-anchor" href="#_3-6-eventchannel" aria-hidden="true">#</a> 3.6 EventChannel</h3><p>2.8.9+ 支持 页面间事件通信通道</p><p><strong>方法</strong></p>`,5)),t("h4",M,[n[88]||(n[88]=t("a",{class:"header-anchor",href:"#eventchannel-emit-string-eventname-any-args","aria-hidden":"true"},"#",-1)),n[89]||(n[89]=s()),t("a",S,[n[87]||(n[87]=s("#")),e(a)]),n[90]||(n[90]=s("EventChannel.emit(string eventName, any args)"))]),n[159]||(n[159]=t("p",null,"触发一个事件",-1)),n[160]||(n[160]=t("p",null,"string eventName 事件名称",-1)),n[161]||(n[161]=t("p",null,"any args 事件参数",-1)),t("h4",D,[n[92]||(n[92]=t("a",{class:"header-anchor",href:"#eventchannel-off-string-eventname-function-fn","aria-hidden":"true"},"#",-1)),n[93]||(n[93]=s()),t("a",E,[n[91]||(n[91]=s("#")),e(a)]),n[94]||(n[94]=s("EventChannel.off(string eventName, function fn)"))]),n[162]||(n[162]=t("p",null,"取消监听一个事件。给出第二个参数时，只取消给出的监听函数，否则取消所有监听函数",-1)),n[163]||(n[163]=t("p",null,"string eventName 事件名称",-1)),n[164]||(n[164]=t("p",null,"function fn 事件监听函数",-1)),n[165]||(n[165]=t("p",null,"参数 any args 触发事件参数",-1)),t("h4",O,[n[96]||(n[96]=t("a",{class:"header-anchor",href:"#eventchannel-on-string-eventname-function-fn","aria-hidden":"true"},"#",-1)),n[97]||(n[97]=s()),t("a",Z,[n[95]||(n[95]=s("#")),e(a)]),n[98]||(n[98]=s("EventChannel.on(string eventName, function fn)"))]),n[166]||(n[166]=t("p",null,"持续监听一个事件",-1)),n[167]||(n[167]=t("p",null,"string eventName 事件名称",-1)),n[168]||(n[168]=t("p",null,"function fn 事件监听函数",-1)),n[169]||(n[169]=t("p",null,"参数 any args 触发事件参数",-1)),t("h4",I,[n[100]||(n[100]=t("a",{class:"header-anchor",href:"#eventchannel-once-string-eventname-function-fn","aria-hidden":"true"},"#",-1)),n[101]||(n[101]=s()),t("a",J,[n[99]||(n[99]=s("#")),e(a)]),n[102]||(n[102]=s("EventChannel.once(string eventName, function fn)"))]),n[170]||(n[170]=l("<p>监听一个事件一次，触发后失效</p><p>string eventName 事件名称</p><p>function fn 事件监听函数</p><p>参数 any args 触发事件参数</p><p>Tips：</p><ul><li><code>navigateTo</code>, <code>redirectTo</code> 只能打开非 tabBar 页面。</li><li><code>switchTab</code> 只能打开 <code>tabBar</code> 页面。</li><li><code>reLaunch</code> 可以打开任意页面。</li><li>页面底部的 <code>tabBar</code> 由页面决定，即只要是定义为 <code>tabBar</code> 的页面，底部都有 <code>tabBar</code>。</li><li>不能在 <code>App.vue</code> 里面进行页面跳转。</li><li>H5端页面刷新之后页面栈会消失，此时<code>navigateBack</code>不能返回，如果一定要返回可以使用<code>history.back()</code>导航到浏览器的其他历史记录。</li></ul><p><strong>参考事项</strong></p>",7)),t("ul",null,[t("li",null,[n[104]||(n[104]=s("页面路由拦截和管理，插件市场有很多封装好的工具类，搜索")),t("a",F,[n[103]||(n[103]=s("路由")),e(a)])])]),n[171]||(n[171]=l(`<h2 id="_4-数据缓存" tabindex="-1"><a class="header-anchor" href="#_4-数据缓存" aria-hidden="true">#</a> 4.数据缓存</h2><h3 id="_4-1-uni-setstoragesync-key-data" tabindex="-1"><a class="header-anchor" href="#_4-1-uni-setstoragesync-key-data" aria-hidden="true">#</a> 4.1 uni.setStorageSync(KEY,DATA)</h3><p>将 data 存储在本地缓存中指定的 key 中，会覆盖掉原来该 key 对应的内容，这是一个同步接口。</p><p><strong>参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">key</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">本地缓存中的指定的 key</td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Any</td><td style="text-align:left;">是</td><td style="text-align:left;">需要存储的内容，只支持原生类型、及能够通过 JSON.stringify 序列化的对象</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&#39;storage_key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong></p><ul><li><code>uni-</code>、<code>uni_</code>、<code>dcloud-</code>、<code>dcloud_</code>为前缀的key，为系统保留关键前缀。如<code>uni_deviceId</code>、<code>uni_id_token</code>，请开发者为key命名时避开这些前缀。</li></ul><h3 id="_4-2-uni-getstoragesync-key" tabindex="-1"><a class="header-anchor" href="#_4-2-uni-getstoragesync-key" aria-hidden="true">#</a> 4.2 uni.getStorageSync(KEY)</h3><p>从本地缓存中同步获取指定 key 对应的内容。</p><p><strong>参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">key</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">本地缓存中的指定的 key</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> value <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">&#39;storage_key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-uni-removestoragesync-key" tabindex="-1"><a class="header-anchor" href="#_4-3-uni-removestoragesync-key" aria-hidden="true">#</a> 4.3 uni.removeStorageSync(KEY)</h3><p>从本地缓存中同步移除指定 key。</p><p><strong>参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">key</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">本地缓存中的指定的 key</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token string">&#39;storage_key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-uni-clearstoragesync" tabindex="-1"><a class="header-anchor" href="#_4-4-uni-clearstoragesync" aria-hidden="true">#</a> 4.4 uni.clearStorageSync()</h3><p>同步清理本地数据缓存。</p><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">clearStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// error</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong></p><p>uni-app的Storage在不同端的实现不同：</p><ul><li>H5端为localStorage，浏览器限制5M大小，是缓存概念，可能会被清理</li><li>App端为原生的plus.storage，无大小限制，不是缓存，是持久化的</li><li>各个小程序端为其自带的storage api，数据存储生命周期跟小程序本身一致，即除用户主动删除或超过一定时间被自动清理，否则数据都一直可用。</li><li>微信小程序单个 key 允许存储的最大数据长度为 1MB，所有数据存储上限为 10MB。</li></ul><h2 id="_5-界面" tabindex="-1"><a class="header-anchor" href="#_5-界面" aria-hidden="true">#</a> 5.界面</h2><h3 id="_5-1-交互反馈" tabindex="-1"><a class="header-anchor" href="#_5-1-交互反馈" aria-hidden="true">#</a> 5.1 交互反馈</h3><h4 id="_5-1-1-uni-showtoast-object" tabindex="-1"><a class="header-anchor" href="#_5-1-1-uni-showtoast-object" aria-hidden="true">#</a> 5.1.1 uni.showToast(OBJECT)</h4>`,30)),t("p",null,[t("a",R,[n[105]||(n[105]=s("uni.showToast(OBJECT) | uni-app官网 (dcloud.net.cn)")),e(a)])]),n[172]||(n[172]=l(`<p>显示消息提示框。</p><p><strong>OBJECT参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">title</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">提示的内容，长度与 icon 取值有关。</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">icon</td><td style="text-align:left;">String</td><td style="text-align:left;">否</td><td style="text-align:left;">图标，有效值详见下方说明。</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">image</td><td style="text-align:left;">String</td><td style="text-align:left;">否</td><td style="text-align:left;">自定义图标的本地路径（app端暂不支持gif）</td><td style="text-align:left;">App、H5、微信小程序、百度小程序</td></tr><tr><td style="text-align:left;">mask</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否显示透明蒙层，防止触摸穿透，默认：false</td><td style="text-align:left;">App、微信小程序</td></tr><tr><td style="text-align:left;">duration</td><td style="text-align:left;">Number</td><td style="text-align:left;">否</td><td style="text-align:left;">提示的延迟时间，单位毫秒，默认：1500</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">position</td><td style="text-align:left;">String</td><td style="text-align:left;">否</td><td style="text-align:left;">纯文本轻提示显示位置，填写有效值后只有 <code>title</code> 属性生效，且不支持通过 uni.hideToast 隐藏。有效值详见下方说明。</td><td style="text-align:left;">App</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td><td style="text-align:left;"></td></tr></tbody></table><p><strong>icon 值说明</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">success</td><td style="text-align:left;">显示成功图标，此时 title 文本在<code>小程序</code>平台最多显示 7 个汉字长度。</td><td style="text-align:left;">支付宝小程序无长度无限制</td></tr><tr><td style="text-align:left;">error</td><td style="text-align:left;">显示错误图标，此时 title 文本在<code>小程序</code>平台最多显示 7 个汉字长度。</td><td style="text-align:left;">支付宝小程序、快手小程序、字节小程序、百度小程序、京东小程序、QQ小程序不支持</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">显示错误图标，此时 title 文本无长度显示。</td><td style="text-align:left;">支付宝小程序、字节小程序</td></tr><tr><td style="text-align:left;">exception</td><td style="text-align:left;">显示异常图标。此时 title 文本无长度显示。</td><td style="text-align:left;">支付宝小程序</td></tr><tr><td style="text-align:left;">loading</td><td style="text-align:left;">显示加载图标，此时 title 文本在<code>小程序</code>平台最多显示 7 个汉字长度。</td><td style="text-align:left;">支付宝小程序不支持</td></tr><tr><td style="text-align:left;">none</td><td style="text-align:left;">不显示图标，此时 title 文本在<code>小程序</code>最多可显示两行，<code>App</code>仅支持单行显示。</td><td style="text-align:left;"></td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;标题&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>position 值说明（仅App生效）</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">top</td><td style="text-align:left;">居上显示</td></tr><tr><td style="text-align:left;">center</td><td style="text-align:left;">居中显示</td></tr><tr><td style="text-align:left;">bottom</td><td style="text-align:left;">居底显示</td></tr></tbody></table><h4 id="_5-1-2-uni-hidetoast" tabindex="-1"><a class="header-anchor" href="#_5-1-2-uni-hidetoast" aria-hidden="true">#</a> 5.1.2 uni.hideToast()</h4><p>隐藏消息提示框。</p><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">hideToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-1-3-uni-showloading-object" tabindex="-1"><a class="header-anchor" href="#_5-1-3-uni-showloading-object" aria-hidden="true">#</a> 5.1.3 uni.showLoading(OBJECT)</h4>`,14)),t("p",null,[n[107]||(n[107]=s("显示 loading 提示框, 需主动调用 ")),t("a",N,[n[106]||(n[106]=s("uni.hideLoading")),e(a)]),n[108]||(n[108]=s(" 才能关闭提示框。"))]),n[173]||(n[173]=l(`<p><strong>OBJECT参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">title</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">提示的文字内容，显示在loading的下方</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">mask</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否显示透明蒙层，防止触摸穿透，默认：false</td><td style="text-align:left;">H5、App、微信小程序、百度小程序</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td><td style="text-align:left;"></td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;加载中&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-1-4-uni-hideloading" tabindex="-1"><a class="header-anchor" href="#_5-1-4-uni-hideloading" aria-hidden="true">#</a> 5.1.4 uni.hideLoading()</h4><p>隐藏 loading 提示框。</p><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;加载中&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-1-5-uni-showmodal-object" tabindex="-1"><a class="header-anchor" href="#_5-1-5-uni-showmodal-object" aria-hidden="true">#</a> 5.1.5 uni.showModal(OBJECT)</h4>`,9)),t("p",null,[t("a",z,[n[109]||(n[109]=s("uni.showToast(OBJECT) | uni-app官网 (dcloud.net.cn)")),e(a)])]),n[174]||(n[174]=l(`<p>显示模态弹窗，可以只有一个确定按钮，也可以同时有确定和取消按钮。类似于一个API整合了 html 中：alert、confirm。</p><p><strong>success返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">confirm</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">为 true 时，表示用户点击了确定按钮</td></tr><tr><td style="text-align:left;">cancel</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">为 true 时，表示用户点击了取消（用于 Android 系统区分点击蒙层关闭还是点击取消按钮关闭）</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;这是一个模态弹窗&#39;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;用户点击确定&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;用户点击取消&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.hdslb.com/bfs/album/061217a883709051e65348a91168e69cdf5a23d4.png" alt="image-20221014121909976" tabindex="0" loading="lazy"><figcaption>image-20221014121909976</figcaption></figure><h4 id="_5-1-6-uni-showactionsheet-object" tabindex="-1"><a class="header-anchor" href="#_5-1-6-uni-showactionsheet-object" aria-hidden="true">#</a> 5.1.6 uni.showActionSheet(OBJECT)</h4>`,7)),t("p",null,[t("a",V,[n[110]||(n[110]=s("uni.showToast(OBJECT) | uni-app官网 (dcloud.net.cn)")),e(a)])]),n[175]||(n[175]=l(`<p>从底部向上弹出操作菜单</p><p><strong>success返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">tapIndex</td><td style="text-align:left;">Number</td><td style="text-align:left;">用户点击的按钮，从上到下的顺序，从0开始</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">itemList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;选中了第&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>tapIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;个按钮&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://i0.hdslb.com/bfs/album/316a4345dc977084b0194df17854f199c3a38253.png" alt="image-20221014122100193" tabindex="0" loading="lazy"><figcaption>image-20221014122100193</figcaption></figure><h3 id="_5-2-下拉刷新" tabindex="-1"><a class="header-anchor" href="#_5-2-下拉刷新" aria-hidden="true">#</a> 5.2 下拉刷新</h3><h4 id="_5-2-1-基本配置" tabindex="-1"><a class="header-anchor" href="#_5-2-1-基本配置" aria-hidden="true">#</a> 5.2.1 基本配置</h4>`,8)),t("table",null,[n[120]||(n[120]=t("thead",null,[t("tr",null,[t("th",null,"属性"),t("th",null,"类型"),t("th",null,"默认值"),t("th",null,"描述"),t("th",null,"平台差异说明")])],-1)),t("tbody",null,[n[118]||(n[118]=t("tr",null,[t("td",null,"backgroundColor"),t("td",null,"HexColor"),t("td",null,"#ffffff"),t("td",null,"下拉显示出来的窗口的背景色"),t("td",null,"微信小程序")],-1)),n[119]||(n[119]=t("tr",null,[t("td",null,"backgroundTextStyle"),t("td",null,"String"),t("td",null,"dark"),t("td",null,"下拉 loading 的样式，仅支持 dark / light"),t("td",null,"微信小程序")],-1)),t("tr",null,[n[114]||(n[114]=t("td",null,"enablePullDownRefresh",-1)),n[115]||(n[115]=t("td",null,"Boolean",-1)),n[116]||(n[116]=t("td",null,"false",-1)),t("td",null,[n[112]||(n[112]=s("是否开启下拉刷新，详见")),t("a",$,[n[111]||(n[111]=s("页面生命周期")),e(a)]),n[113]||(n[113]=s("。"))]),n[117]||(n[117]=t("td",null,null,-1))])])]),n[176]||(n[176]=l(`<figure><img src="https://i0.hdslb.com/bfs/album/2351f57d223d7a5d127f873638ed5aa931adf7df.png" alt="image-20221012202610815" tabindex="0" loading="lazy"><figcaption>image-20221012202610815</figcaption></figure><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#bfa&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dark&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>网页页面显示如下：</strong></p><figure><img src="https://i0.hdslb.com/bfs/album/38e25e497d658afacd1b393dc34277c9021bc4da.png" alt="image-20221012202548755" tabindex="0" loading="lazy"><figcaption>image-20221012202548755</figcaption></figure><p><strong>小程序页面如下：</strong></p><figure><img src="https://i0.hdslb.com/bfs/album/65649a17ef5120accf4456f608405d31750cae4f.png" alt="image-20221012202559340" tabindex="0" loading="lazy"><figcaption>image-20221012202559340</figcaption></figure><p><strong>onPullDownRefresh</strong></p><p>在 js 中定义 onPullDownRefresh 处理函数（和onLoad等生命周期函数同级），监听该页面用户下拉刷新事件。</p><ul><li>需要在 <code>pages.json</code> 里，找到的当前页面的pages节点，并在 <code>style</code> 选项中开启 <code>enablePullDownRefresh</code>。</li><li>当处理完数据刷新后，<code>uni.stopPullDownRefresh</code> 可以停止当前页面的下拉刷新。</li></ul>`,9)),t("h4",G,[n[122]||(n[122]=t("a",{class:"header-anchor",href:"#_5-2-2-uni-startpulldownrefresh","aria-hidden":"true"},"#",-1)),n[123]||(n[123]=s(" 5.2.2 ")),t("a",K,[n[121]||(n[121]=s("#")),e(a)]),n[124]||(n[124]=s("uni.startPullDownRefresh"))]),n[177]||(n[177]=l('<p>开始下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。</p><p><strong>OBJECT 参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>success 返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">errMsg</td><td style="text-align:left;">String</td><td style="text-align:left;">接口调用结果</td></tr></tbody></table>',5)),t("h4",U,[n[126]||(n[126]=t("a",{class:"header-anchor",href:"#_5-2-3-uni-stoppulldownrefresh","aria-hidden":"true"},"#",-1)),n[127]||(n[127]=s(" 5.2.3 ")),t("a",X,[n[125]||(n[125]=s("#")),e(a)]),n[128]||(n[128]=s("uni.stopPullDownRefresh"))]),n[178]||(n[178]=l(`<p>停止当前页面下拉刷新。</p><p><strong>示例</strong></p><p>第一步：开启下拉刷新。需要在 pages.json 里，找到的当前页面的pages节点，并在 style 选项中开启 enablePullDownRefresh。</p><p>第二步：onPullDownRefresh 处理函数（和onLoad等生命周期函数同级），该函数的作用就是用来监听该页面用户下拉刷新事件。</p><p>第三步：对应的停止uni.stopPullDownRefresh() 和 开始uni.startPullDownRefresh(OBJECT)下拉刷新的函数。</p><p>pages.json</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
        	<span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
        	<span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        		<span class="token string-property property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uni-app&quot;</span><span class="token punctuation">,</span>
        		<span class="token string-property property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        	<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;globalStyle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    	<span class="token string-property property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
    	<span class="token string-property property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#0faeff&quot;</span><span class="token punctuation">,</span>
    	<span class="token string-property property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fbf9fe&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>index.vue</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 仅做示例，实际开发中延时根据需求来使用。</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;uni-app&#39;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;start pulldown&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		uni<span class="token punctuation">.</span><span class="token function">startPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//一旦触发下拉刷新就会执行下面方法。</span>
	<span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;refresh&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			uni<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//上面虽然睡眠了，但是依然会继续执行下面的代码。</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;验证代码继续执行&#39;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong></p><ul><li>支付宝小程序<code>startPullDownRefresh</code>在开发者工具里会提示<code>暂未开放，请勿使用</code></li><li>支付宝小程序<code>startPullDownRefresh</code>请使用真机调试（非真机预览）</li><li>后续支付宝小程序开发工具更新可能会有所修改</li></ul><h2 id="_6-页面和窗体" tabindex="-1"><a class="header-anchor" href="#_6-页面和窗体" aria-hidden="true">#</a> 6.页面和窗体</h2><h3 id="_6-1-页面" tabindex="-1"><a class="header-anchor" href="#_6-1-页面" aria-hidden="true">#</a> 6.1 页面</h3><h4 id="_6-1-1-getcurrentpages" tabindex="-1"><a class="header-anchor" href="#_6-1-1-getcurrentpages" aria-hidden="true">#</a> 6.1.1 getCurrentPages()</h4><p><code>getCurrentPages()</code> 函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。</p><p><strong>注意：</strong></p><ul><li><code>getCurrentPages()</code>仅用于展示页面栈的情况，请勿修改页面栈，以免造成页面状态错误。</li><li>不要在 App.onLaunch 的时候调用 getCurrentPages()，此时page 还没有生成。(要在方法里或者onshow里写，将此页面存入栈空间)</li></ul><p>每个页面实例的方法属性列表：</p><table><thead><tr><th>方法</th><th>描述</th><th>平台说明</th></tr></thead><tbody><tr><td>page.$getAppWebview()</td><td>获取当前页面的webview对象实例</td><td>App</td></tr><tr><td>page.route</td><td>获取当前页面的路由</td><td></td></tr></tbody></table><p>熟悉页面栈后才能更好的使用getCurrentPages()，下面将列举几种常用的使用场景： 1.利用页面栈的长度 例如：进入小程序非默认首页时，需要提供返回首页的按钮或者执行其它事件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当前页面栈</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>pages<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//todo</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、跨页面赋值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当前页面栈</span>
 <span class="token keyword">let</span> prevPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//上一页面</span>
 <span class="token comment">//直接给上移页面赋值</span>
 prevPage<span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、页面跳转后自动刷新</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token comment">//举例</span>
 uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;../index/index&#39;</span><span class="token punctuation">,</span>
     <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">var</span> page <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当前页面</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> page <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
         page<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//或者其它操作</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、获取当前页面相关信息</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当前页面栈</span>
<span class="token comment">//当前页面为页面栈的最后一个元素</span>
<span class="token keyword">let</span> prevPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//当前页面</span>
<span class="token comment">// or</span>
<span class="token comment">// pop() 方法用于删除并返回数组的最后一个元素</span>
<span class="token keyword">let</span> prevPage <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当前页面</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> prevPage<span class="token punctuation">.</span>route<span class="token punctuation">)</span> <span class="token comment">//举例：输出为‘pages/index/index</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-1-2-getapp" tabindex="-1"><a class="header-anchor" href="#_6-1-2-getapp" aria-hidden="true">#</a> 6.1.2 getApp()</h4><p><code>getApp()</code> 函数用于获取当前应用实例，一般用于获取globalData 。</p><p><strong>实例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>globalData<span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：</strong></p><ul><li>不要在定义于 <code>App()</code> 内的函数中，或调用 <code>App</code> 前调用 <code>getApp()</code> ，可以通过 <code>this.$scope</code> 获取对应的app实例</li><li>通过 <code>getApp()</code> 获取实例之后，不要私自调用生命周期函数。</li><li>当在首页<code>nvue</code>中使用<code>getApp()</code>不一定可以获取真正的<code>App</code>对象。对此提供了<code>const app = getApp({allowDefault: true})</code>用来获取原始的<code>App</code>对象，可以用来在首页对<code>globalData</code>等初始化</li></ul><h3 id="_6-2-页面通讯" tabindex="-1"><a class="header-anchor" href="#_6-2-页面通讯" aria-hidden="true">#</a> 6.2 页面通讯</h3><h4 id="_6-2-1-uni-emit-eventname-object" tabindex="-1"><a class="header-anchor" href="#_6-2-1-uni-emit-eventname-object" aria-hidden="true">#</a> 6.2.1 uni.$emit(eventName,OBJECT)</h4><p>触发全局的自定义事件，附加参数都会传给监听器回调函数。</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>eventName</td><td>String</td><td>事件名</td></tr><tr><td>OBJECT</td><td>Object</td><td>触发事件携带的附加参数</td></tr></tbody></table><p><strong>代码示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;页面更新&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>复制代码</p><h4 id="_6-2-2-uni-on-eventname-callback" tabindex="-1"><a class="header-anchor" href="#_6-2-2-uni-on-eventname-callback" aria-hidden="true">#</a> 6.2.2 uni.$on(eventName,callback)</h4><p>监听全局的自定义事件，事件由 <code>uni.$emit</code> 触发，回调函数会接收事件触发函数的传入参数。</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>eventName</td><td>String</td><td>事件名</td></tr><tr><td>callback</td><td>Function</td><td>事件的回调函数</td></tr></tbody></table><p><strong>代码示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;监听到事件来自 update ，携带参数 msg 为：&#39;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复制代码</p><h4 id="_6-2-3-uni-once-eventname-callback" tabindex="-1"><a class="header-anchor" href="#_6-2-3-uni-once-eventname-callback" aria-hidden="true">#</a> 6.2.3 uni.$once(eventName,callback)</h4><p>监听全局的自定义事件，事件由 <code>uni.$emit</code> 触发，但仅触发一次，在第一次触发之后移除该监听器。</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>eventName</td><td>String</td><td>事件名</td></tr><tr><td>callback</td><td>Function</td><td>事件的回调函数</td></tr></tbody></table><p><strong>代码示例</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span><span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;监听到事件来自 update ，携带参数 msg 为：&#39;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复制代码</p><h4 id="_6-2-3-uni-off-eventname-callback" tabindex="-1"><a class="header-anchor" href="#_6-2-3-uni-off-eventname-callback" aria-hidden="true">#</a> 6.2.3 uni.$off([eventName, callback])</h4><p>移除全局自定义事件监听器。</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>eventName</td><td>Array＜String＞</td><td>事件名</td></tr><tr><td>callback</td><td>Function</td><td>事件的回调函数</td></tr></tbody></table><p><strong>Tips</strong></p><ul><li>如果uni.$off没有传入参数，则移除App级别的所有事件监听器；</li><li>如果只提供了事件名（eventName），则移除该事件名对应的所有监听器；</li><li>如果同时提供了事件与回调，则只移除这个事件回调的监听器；</li><li>提供的回调必须跟$on的回调为同一个才能移除这个回调的监听器；</li></ul><p><strong>代码示例</strong></p><p><code>list.vue</code></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goTestPage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>uniApi跳转到测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function">goTestPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/pages/test/test&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;cc&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>
						<span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&quot;bb&quot;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>

				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>test.vue</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onUnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 移除监听事件  </span>
        uni<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">&#39;cc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意事项</strong></p>`,63)),t("ul",null,[t("li",null,[n[133]||(n[133]=s("uni.")),t("mjx-container",Y,[(p(),o("svg",W,n[129]||(n[129]=[l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(466,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1344,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1689,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2050,0)"><g data-mml-node="mo"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">、</text></g></g><g data-mml-node="mi" transform="translate(3050,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3622,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4222,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(4567,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g>',1)]))),n[130]||(n[130]=t("mjx-assistive-mml",{unselectable:"on",display:"inline"},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"e"),t("mi",null,"m"),t("mi",null,"i"),t("mi",null,"t"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"、")]),t("mi",null,"u"),t("mi",null,"n"),t("mi",null,"i"),t("mo",null,".")])],-1))]),n[134]||(n[134]=s("on 、 uni.")),t("mjx-container",_,[(p(),o("svg",nn,n[131]||(n[131]=[l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(485,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1085,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(1518,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1984,0)"><g data-mml-node="mo"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">、</text></g></g><g data-mml-node="mi" transform="translate(2984,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3556,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4156,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(4501,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g>',1)]))),n[132]||(n[132]=t("mjx-assistive-mml",{unselectable:"on",display:"inline"},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mi",null,"n"),t("mi",null,"c"),t("mi",null,"e"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mo",null,"、")]),t("mi",null,"u"),t("mi",null,"n"),t("mi",null,"i"),t("mo",null,".")])],-1))]),n[135]||(n[135]=s("off 触发的事件都是 App 全局级别的，跨任意组件，页面，nvue，vue 等"))]),t("li",null,[n[138]||(n[138]=s("使用时，注意及时销毁事件监听，比如，页面 onLoad 里边 uni.")),t("mjx-container",tn,[(p(),o("svg",sn,n[136]||(n[136]=[l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(485,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">注</text></g><g data-mml-node="mi" transform="translate(2085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">册</text></g><g data-mml-node="mi" transform="translate(3085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">监</text></g><g data-mml-node="mi" transform="translate(4085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">听</text></g><g data-mml-node="mi" transform="translate(5085,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(6085,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(6570,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(7170,0)"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mi" transform="translate(7937,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(8537,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(8835,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(9320,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(9849,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(10369,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">里</text></g><g data-mml-node="mi" transform="translate(11369,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">边</text></g><g data-mml-node="mi" transform="translate(12369,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(12941,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(13541,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(13886,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g>',1)]))),n[137]||(n[137]=t("mjx-assistive-mml",{unselectable:"on",display:"inline"},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mi",null,"n"),t("mi",{mathvariant:"normal"},"注"),t("mi",{mathvariant:"normal"},"册"),t("mi",{mathvariant:"normal"},"监"),t("mi",{mathvariant:"normal"},"听"),t("mi",null,"，"),t("mi",null,"o"),t("mi",null,"n"),t("mi",null,"U"),t("mi",null,"n"),t("mi",null,"l"),t("mi",null,"o"),t("mi",null,"a"),t("mi",null,"d"),t("mi",{mathvariant:"normal"},"里"),t("mi",{mathvariant:"normal"},"边"),t("mi",null,"u"),t("mi",null,"n"),t("mi",null,"i"),t("mo",null,".")])],-1))]),n[139]||(n[139]=s("off 移除，或者一次性的事件，直接使用 uni.$once 监听"))]),t("li",null,[n[142]||(n[142]=s("注意 uni.")),t("mjx-container",an,[(p(),o("svg",en,n[140]||(n[140]=[l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(485,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">定</text></g><g data-mml-node="mi" transform="translate(2085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">义</text></g><g data-mml-node="mi" transform="translate(3085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">完</text></g><g data-mml-node="mi" transform="translate(4085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">成</text></g><g data-mml-node="mi" transform="translate(5085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">后</text></g><g data-mml-node="mi" transform="translate(6085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">才</text></g><g data-mml-node="mi" transform="translate(7085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">能</text></g><g data-mml-node="mi" transform="translate(8085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">接</text></g><g data-mml-node="mi" transform="translate(9085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">收</text></g><g data-mml-node="mi" transform="translate(10085,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">到</text></g><g data-mml-node="mi" transform="translate(11085,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(11657,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(12257,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(12602,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g>',1)]))),n[141]||(n[141]=t("mjx-assistive-mml",{unselectable:"on",display:"inline"},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"o"),t("mi",null,"n"),t("mi",{mathvariant:"normal"},"定"),t("mi",{mathvariant:"normal"},"义"),t("mi",{mathvariant:"normal"},"完"),t("mi",{mathvariant:"normal"},"成"),t("mi",{mathvariant:"normal"},"后"),t("mi",{mathvariant:"normal"},"才"),t("mi",{mathvariant:"normal"},"能"),t("mi",{mathvariant:"normal"},"接"),t("mi",{mathvariant:"normal"},"收"),t("mi",{mathvariant:"normal"},"到"),t("mi",null,"u"),t("mi",null,"n"),t("mi",null,"i"),t("mo",null,".")])],-1))]),n[143]||(n[143]=s("emit 传递的数据"))])])])}const un=i(u,[["render",ln],["__file","05.html.vue"]]);export{un as default};
