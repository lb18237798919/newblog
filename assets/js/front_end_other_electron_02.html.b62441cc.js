"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[292],{6262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},1112:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>l,data:()=>h});var n=a(641);const e={},l=(0,a(6262).A)(e,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,i[0]||(i[0]=[(0,n.Fv)('<h1 id="_02-ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘" tabindex="-1"><a class="header-anchor" href="#_02-ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘"><span>02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘</span></a></h1><h2 id="_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬"><span>1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ</span></a></h2><p>Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç€å®Œå…¨æ“ä½œç³»ç»Ÿè®¿é—®æƒé™çš„ Node.js ç¯å¢ƒã€‚ é™¤äº† <a href="https://www.electronjs.org/zh/docs/latest/api/app" target="_blank" rel="noopener noreferrer">Electron æ¨¡ç»„</a> ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://nodejs.org/dist/latest/docs/api/" target="_blank" rel="noopener noreferrer">Node.js å†…ç½®æ¨¡å—</a> å’Œæ‰€æœ‰é€šè¿‡ npm å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ å¦ä¸€æ–¹é¢ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ¸²æŸ“è¿›ç¨‹é»˜è®¤è·‘åœ¨ç½‘é¡µé¡µé¢ä¸Šï¼Œè€Œå¹¶é Node.jsé‡Œã€‚</p><p>ä¸ºäº†å°† Electron çš„ä¸åŒç±»å‹çš„è¿›ç¨‹æ¡¥æ¥åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¢«ç§°ä¸º <strong>é¢„åŠ è½½</strong> çš„ç‰¹æ®Šè„šæœ¬ã€‚</p><h2 id="_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨" tabindex="-1"><a class="header-anchor" href="#_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨"><span>2.ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨</span></a></h2><p>BrowserWindow çš„é¢„åŠ è½½è„šæœ¬è¿è¡Œåœ¨å…·æœ‰ HTML DOM å’Œ Node.jsã€Electron API çš„æœ‰é™å­é›†è®¿é—®æƒé™çš„ç¯å¢ƒä¸­ã€‚</p><blockquote><p><strong>é¢„åŠ è½½è„šæœ¬æ²™ç›’åŒ–</strong></p><p>ä» Electron 20 å¼€å§‹ï¼Œé¢„åŠ è½½è„šæœ¬é»˜è®¤ <strong>æ²™ç›’åŒ–</strong> ï¼Œä¸å†æ‹¥æœ‰å®Œæ•´ Node.js ç¯å¢ƒçš„è®¿é—®æƒã€‚ å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€ä½ åªæ‹¥æœ‰ä¸€ä¸ª polyfilled çš„ <code>require</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åªèƒ½è®¿é—®ä¸€ç»„æœ‰é™çš„ APIã€‚</p><table><thead><tr><th>å¯ç”¨çš„ API</th><th>è¯¦ç»†ä¿¡æ¯</th></tr></thead><tbody><tr><td>Electron æ¨¡å—</td><td>æ¸²æŸ“è¿›ç¨‹æ¨¡å—</td></tr><tr><td>Node.js æ¨¡å—</td><td><a href="https://nodejs.org/api/events.html" target="_blank" rel="noopener noreferrer"><code>events</code></a>ã€<a href="https://nodejs.org/api/timers.html" target="_blank" rel="noopener noreferrer"><code>timers</code></a>ã€<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer"><code>url</code></a></td></tr><tr><td>Polyfilled çš„å…¨å±€æ¨¡å—</td><td><a href="https://nodejs.org/api/buffer.html" target="_blank" rel="noopener noreferrer"><code>Buffer</code></a>ã€<a href="https://www.electronjs.org/zh/docs/latest/api/process" target="_blank" rel="noopener noreferrer"><code>process</code></a>ã€<a href="https://nodejs.org/api/timers.html#timers_clearimmediate_immediate" target="_blank" rel="noopener noreferrer"><code>clearImmediate</code></a>ã€<a href="https://nodejs.org/api/timers.html#timers_setimmediate_callback_args" target="_blank" rel="noopener noreferrer"><code>setImmediate</code></a></td></tr></tbody></table><p>æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯» <a href="https://www.electronjs.org/zh/docs/latest/tutorial/sandbox" target="_blank" rel="noopener noreferrer">æ²™ç›’è¿›ç¨‹</a> æ•™ç¨‹ã€‚</p></blockquote><p>é¢„åŠ è½½è„šæœ¬åƒ Chrome æ‰©å±•çš„ <a href="https://developer.chrome.com/docs/extensions/mv3/content_scripts/" target="_blank" rel="noopener noreferrer">å†…å®¹è„šæœ¬</a>ï¼ˆContent Scriptï¼‰ä¸€æ ·ï¼Œä¼šåœ¨æ¸²æŸ“å™¨çš„ç½‘é¡µåŠ è½½ä¹‹å‰æ³¨å…¥ã€‚ å¦‚æœä½ æƒ³å‘æ¸²æŸ“å™¨åŠ å…¥éœ€è¦ç‰¹æ®Šæƒé™çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡ <a href="https://www.electronjs.org/zh/docs/latest/api/context-bridge" target="_blank" rel="noopener noreferrer">contextBridge</a> æ¥å£å®šä¹‰ <a href="https://developer.mozilla.org/en-US/docs/Glossary/Global_object" target="_blank" rel="noopener noreferrer">å…¨å±€å¯¹è±¡</a>ã€‚</p><p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸€æ¦‚å¿µï¼Œä½ å°†ä¼šåˆ›å»ºä¸€ä¸ªå°†åº”ç”¨ä¸­çš„ Chromeã€Nodeã€Electron ç‰ˆæœ¬å·æš´éœ²è‡³æ¸²æŸ“å™¨çš„é¢„åŠ è½½è„šæœ¬</p><p>æ–°å»ºä¸€ä¸ª <code>preload.js</code> æ–‡ä»¶ã€‚è¯¥è„šæœ¬é€šè¿‡ <code>versions</code> è¿™ä¸€å…¨å±€å˜é‡ï¼Œå°† Electron çš„ <code>process.versions</code> å¯¹è±¡æš´éœ²ç»™æ¸²æŸ“å™¨ã€‚</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">contextBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;electron&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">contextBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exposeInMainWorld</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;versions&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  node</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  chrome</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  electron</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">electron</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // èƒ½æš´éœ²çš„ä¸ä»…ä»…æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²å˜é‡</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å°†è„šæœ¬é™„åœ¨æ¸²æŸ“è¿›ç¨‹ä¸Šï¼Œåœ¨ BrowserWindow æ„é€ å™¨ä¸­ä½¿ç”¨ <code>webPreferences.preload</code> ä¼ å…¥è„šæœ¬çš„è·¯å¾„ã€‚</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">BrowserWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;electron&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;path&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createWindow</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> win</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BrowserWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    width</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    height</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    webPreferences</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      preload</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">__dirname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;preload.js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  })</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  win</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;index.html&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">whenReady</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">then</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  createWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æç¤º</strong></p><p>è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªNode.jsæ¦‚å¿µï¼š</p><ul><li><a href="https://nodejs.org/api/modules.html#modules_dirname" target="_blank" rel="noopener noreferrer"><code>__dirname</code></a> å­—ç¬¦ä¸²æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œè„šæœ¬çš„è·¯å¾„ (åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæŒ‡å‘ä½ çš„é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹)ã€‚</li><li><a href="https://nodejs.org/api/path.html#path_path_join_paths" target="_blank" rel="noopener noreferrer"><code>path.join</code></a> API å°†å¤šä¸ªè·¯å¾„è”ç»“åœ¨ä¸€èµ·ï¼Œåˆ›å»ºä¸€ä¸ªè·¨å¹³å°çš„è·¯å¾„å­—ç¬¦ä¸²ã€‚</li></ul></blockquote><p>ç°åœ¨æ¸²æŸ“å™¨èƒ½å¤Ÿå…¨å±€è®¿é—® <code>versions</code> äº†ï¼Œè®©æˆ‘ä»¬å¿«å¿«å°†é‡Œè¾¹çš„ä¿¡æ¯æ˜¾ç¤ºåœ¨çª—å£ä¸­ã€‚ è¿™ä¸ªå˜é‡ä¸ä»…å¯ä»¥é€šè¿‡ <code>window.versions</code> è®¿é—®ï¼Œä¹Ÿå¯ä»¥å¾ˆç®€å•åœ°ä½¿ç”¨ <code>versions</code> æ¥è®¿é—®ã€‚ æ–°å»ºä¸€ä¸ª <code>renderer.js</code> è„šæœ¬ï¼Œ è¿™ä¸ªè„šæœ¬ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById" target="_blank" rel="noopener noreferrer"><code>document.getElementById</code></a> DOM æ¥å£æ¥æ›¿æ¢ <code>id</code> å±æ€§ä¸º <code>info</code> çš„ HTML å…ƒç´ æ˜¾ç¤ºæ–‡æœ¬ã€‚</p><p><code>render.js</code></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> information</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> document</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getElementById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;info&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">information</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">innerText</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `æœ¬åº”ç”¨æ­£åœ¨ä½¿ç”¨ Chrome (v</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#50A14F;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">), Node.js (v</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#50A14F;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">), å’Œ Electron (v</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#50A14F;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">electron</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè¯·ä¿®æ”¹ä½ çš„ <code>index.html</code> æ–‡ä»¶ã€‚åŠ ä¸Šä¸€ä¸ª <code>id</code> å±æ€§ä¸º <code>info</code> çš„å…¨æ–°å…ƒç´ ï¼Œå¹¶ä¸”è®°å¾—åŠ ä¸Šä½ çš„ <code>renderer.js</code> è„šæœ¬ï¼š</p><p><code>index.html</code></p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;!</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DOCTYPE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> charset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      http-equiv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Content-Security-Policy&quot;</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    /&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      http-equiv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;X-Content-Security-Policy&quot;</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;default-src &#39;self&#39;; script-src &#39;self&#39;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    /&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;ğŸ‘‹&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;info&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./render.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åšå®Œè¿™å‡ æ­¥ä¹‹åï¼Œä½ çš„åº”ç”¨åº”è¯¥é•¿è¿™æ ·ï¼š</p><h2 id="_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡"><span>3.åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡</span></a></h2><p>æˆ‘ä»¬ä¹‹å‰æåˆ°ï¼ŒElectron çš„ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æœ‰ç€æ¸…æ¥šçš„åˆ†å·¥å¹¶ä¸”ä¸å¯äº’æ¢ã€‚ è¿™ä»£è¡¨ç€æ— è®ºæ˜¯ä»æ¸²æŸ“è¿›ç¨‹ç›´æ¥è®¿é—® Node.js æ¥å£ï¼Œäº¦æˆ–è€…æ˜¯ä»ä¸»è¿›ç¨‹è®¿é—® HTML æ–‡æ¡£å¯¹è±¡æ¨¡å‹ (DOM)ï¼Œéƒ½æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡ (IPC)ã€‚å¯ä»¥ä½¿ç”¨ Electron çš„ <code>ipcMain</code> æ¨¡å—å’Œ <code>ipcRenderer</code> æ¨¡å—æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚ ä¸ºäº†ä»ä½ çš„ç½‘é¡µå‘ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>ipcMain.handle</code> è®¾ç½®ä¸€ä¸ªä¸»è¿›ç¨‹å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ï¼Œç„¶ååœ¨é¢„å¤„ç†è„šæœ¬ä¸­æš´éœ²ä¸€ä¸ªè¢«ç§°ä¸º <code>ipcRenderer.invoke</code> çš„å‡½æ•°æ¥è§¦å‘è¯¥å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚</p><p>æˆ‘ä»¬å°†å‘æ¸²æŸ“å™¨æ·»åŠ ä¸€ä¸ªå«åš <code>ping()</code> çš„å…¨å±€å‡½æ•°æ¥æ¼”ç¤ºè¿™ä¸€ç‚¹ã€‚è¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªä»ä¸»è¿›ç¨‹ç¿»å±±è¶Šå²­è€Œæ¥çš„å­—ç¬¦ä¸²ã€‚</p><p>é¦–å…ˆï¼Œåœ¨é¢„å¤„ç†è„šæœ¬ä¸­è®¾ç½® <code>invoke</code> è°ƒç”¨ï¼š</p><p><code>preload.js</code></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">contextBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">ipcRenderer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;electron&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">contextBridge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exposeInMainWorld</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;versions&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  node</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  chrome</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  electron</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">electron</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ping</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> ipcRenderer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ping&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // èƒ½æš´éœ²çš„ä¸ä»…ä»…æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²å˜é‡</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>IPC å®‰å…¨</strong></p><p>å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥åŒ…è£¹ <code>ipcRenderer.invoke(&#39;ping&#39;)</code> è°ƒç”¨ï¼Œè€Œå¹¶éç›´æ¥é€šè¿‡ context bridge æš´éœ² <code>ipcRenderer</code> æ¨¡å—ã€‚ ä½ <strong>æ°¸è¿œ</strong>éƒ½ä¸è¦æƒ³é€šè¿‡é¢„åŠ è½½ç›´æ¥æš´éœ²æ•´ä¸ª <code>ipcRenderer</code> æ¨¡å—ï¼Œè¿™å°†ä½¿å¾—ä½ çš„æ¸²æŸ“å™¨èƒ½å¤Ÿç›´æ¥å‘ä¸»è¿›ç¨‹å‘é€ä»»æ„çš„ IPC ä¿¡æ¯ï¼Œä¼šä½¿å¾—å…¶æˆä¸ºæ¶æ„ä»£ç æœ€å¼ºæœ‰åŠ›çš„æ”»å‡»åª’ä»‹ã€‚</p></blockquote><p>ç„¶åï¼Œåœ¨ä¸»è¿›ç¨‹ä¸­è®¾ç½®ä½ çš„ <code>handle</code> ç›‘å¬å™¨ã€‚ æˆ‘ä»¬åœ¨ HTML æ–‡ä»¶åŠ è½½<em>ä¹‹å‰</em>å®Œæˆäº†è¿™äº›ï¼Œæ‰€ä»¥æ‰èƒ½ä¿è¯åœ¨ä½ ä»æ¸²æŸ“å™¨å‘é€ <code>invoke</code> è°ƒç”¨ä¹‹å‰å¤„ç†ç¨‹åºèƒ½å¤Ÿå‡†å¤‡å°±ç»ªã€‚</p><p><code>main.js</code></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">BrowserWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">ipcMain</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;electron&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;path&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createWindow</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> win</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BrowserWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    width</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    height</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 600</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    webPreferences</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      preload</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">__dirname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;preload.js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  })</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  ipcMain</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ping&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;pong&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  win</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;index.html&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">whenReady</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">then</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">createWindow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†å‘é€å™¨ä¸æ¥æ”¶å™¨è®¾ç½®å®Œæˆä¹‹åï¼Œç°åœ¨ä½ å¯ä»¥å°†ä¿¡æ¯é€šè¿‡åˆšåˆšå®šä¹‰çš„ <code>&#39;ping&#39;</code> é€šé“ä»æ¸²æŸ“å™¨å‘é€è‡³ä¸»è¿›ç¨‹å½“ä¸­ã€‚</p><p><code>renderer.js</code></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> func</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">versions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ‰“å° &#39;pong&#39;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">func</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æ¬²äº†è§£ä½¿ç”¨ <code>ipcRenderer</code> æ¨¡å—å’Œ <code>ipcMain</code> æ¨¡å—çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·è®¿é—®å®Œæ•´çš„ <a href="https://www.electronjs.org/zh/docs/latest/tutorial/ipc" target="_blank" rel="noopener noreferrer">è¿›ç¨‹é—´é€šä¿¡</a> æŒ‡å—ã€‚</p><h2 id="_4-æ‘˜è¦" tabindex="-1"><a class="header-anchor" href="#_4-æ‘˜è¦"><span>4.æ‘˜è¦</span></a></h2><p>é¢„åŠ è½½è„šæœ¬åŒ…å«åœ¨æµè§ˆå™¨çª—å£åŠ è½½ç½‘é¡µä¹‹å‰è¿è¡Œçš„ä»£ç ã€‚ å…¶å¯è®¿é—® DOM æ¥å£å’Œ Node.js ç¯å¢ƒï¼Œå¹¶ä¸”ç»å¸¸åœ¨å…¶ä¸­ä½¿ç”¨ <code>contextBridge</code> æ¥å£å°†ç‰¹æƒæ¥å£æš´éœ²ç»™æ¸²æŸ“å™¨ã€‚</p><p>ç”±äºä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æœ‰ç€å®Œå…¨ä¸åŒçš„åˆ†å·¥ï¼ŒElectron åº”ç”¨é€šå¸¸ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥è®¾ç½®è¿›ç¨‹é—´é€šä¿¡ (IPC) æ¥å£ä»¥åœ¨ä¸¤ç§è¿›ç¨‹ä¹‹é—´ä¼ è¾“ä»»æ„ä¿¡æ¯ã€‚</p>',39)]))}]]),h=JSON.parse('{"path":"/front_end/other/electron/02.html","title":"02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘","lang":"zh-CN","frontmatter":{"description":"02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘ 1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç€å®Œå…¨æ“ä½œç³»ç»Ÿè®¿é—®æƒé™çš„ Node.js ç¯å¢ƒã€‚ é™¤äº† Electron æ¨¡ç»„ ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Node.js å†…ç½®æ¨¡å— å’Œæ‰€æœ‰é€šè¿‡ npm å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ å¦ä¸€æ–¹é¢ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ¸²æŸ“è¿›ç¨‹é»˜è®¤è·‘åœ¨ç½‘é¡µé¡µé¢ä¸Šï¼Œè€Œå¹¶é Node.jsé‡Œã€‚ ä¸ºäº†å°† Electron ...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/newblog/front_end/other/electron/02.html"}],["meta",{"property":"og:site_name","content":"åšå®¢æ¼”ç¤º"}],["meta",{"property":"og:title","content":"02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘"}],["meta",{"property":"og:description","content":"02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘ 1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç€å®Œå…¨æ“ä½œç³»ç»Ÿè®¿é—®æƒé™çš„ Node.js ç¯å¢ƒã€‚ é™¤äº† Electron æ¨¡ç»„ ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Node.js å†…ç½®æ¨¡å— å’Œæ‰€æœ‰é€šè¿‡ npm å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ å¦ä¸€æ–¹é¢ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ¸²æŸ“è¿›ç¨‹é»˜è®¤è·‘åœ¨ç½‘é¡µé¡µé¢ä¸Šï¼Œè€Œå¹¶é Node.jsé‡Œã€‚ ä¸ºäº†å°† Electron ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-02T07:29:48.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-02T07:29:48.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-02T07:29:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Hope\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ","slug":"_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬","link":"#_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬","children":[]},{"level":2,"title":"2.ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨","slug":"_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨","link":"#_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨","children":[]},{"level":2,"title":"3.åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡","slug":"_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡","link":"#_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡","children":[]},{"level":2,"title":"4.æ‘˜è¦","slug":"_4-æ‘˜è¦","link":"#_4-æ‘˜è¦","children":[]}],"git":{"createdTime":1733124588000,"updatedTime":1733124588000,"contributors":[{"name":"liubin","email":"liubin8919@qq.com","commits":1}]},"readingTime":{"minutes":5.2,"words":1559},"filePathRelative":"front_end/other/electron/02.md","localizedDate":"2024å¹´12æœˆ2æ—¥","excerpt":"\\n<h2>1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ</h2>\\n<p>Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç€å®Œå…¨æ“ä½œç³»ç»Ÿè®¿é—®æƒé™çš„ Node.js ç¯å¢ƒã€‚ é™¤äº† <a href=\\"https://www.electronjs.org/zh/docs/latest/api/app\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Electron æ¨¡ç»„</a> ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href=\\"https://nodejs.org/dist/latest/docs/api/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Node.js å†…ç½®æ¨¡å—</a> å’Œæ‰€æœ‰é€šè¿‡ npm å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ å¦ä¸€æ–¹é¢ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ¸²æŸ“è¿›ç¨‹é»˜è®¤è·‘åœ¨ç½‘é¡µé¡µé¢ä¸Šï¼Œè€Œå¹¶é Node.jsé‡Œã€‚</p>","autoDesc":true}')}}]);