<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta property="og:url" content="https://lb18237798919.github.io/newblog/myblog/professional_knowledge/computer_network/05.html"><meta property="og:site_name" content="blog"><meta property="og:title" content="05 【计算机网络-运输层】"><meta property="og:description" content="05 【计算机网络-运输层】 1.运输层概述 1.1 概念 进程之间的通信 image-20240618101829778"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-02T08:17:30.000Z"><meta property="article:modified_time" content="2024-12-02T08:17:30.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"05 【计算机网络-运输层】","image":[""],"dateModified":"2024-12-02T08:17:30.000Z","author":[]}</script><meta name="referrer" content="no-referrer"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>05 【计算机网络-运输层】 | blog</title><meta name="description" content="05 【计算机网络-运输层】 1.运输层概述 1.1 概念 进程之间的通信 image-20240618101829778">
    <meta name="keywords" content="自我提升,效率提升,开源工具,学习笔记" />
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme='dark'] {
        --bg-color: #252232;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-theme-hope-scheme')
      const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.querySelector('html').setAttribute('data-theme', 'dark')
      }
    </script>
    <link rel="preload" href="/myblog/assets/style-3472de0d.css" as="style"><link rel="stylesheet" href="/myblog/assets/style-3472de0d.css">
    <link rel="modulepreload" href="/myblog/assets/app-1c846d8b.js"><link rel="modulepreload" href="/myblog/assets/05.html-7f5b185c.js"><link rel="modulepreload" href="/myblog/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/myblog/assets/05.html-0c2f6c58.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="vp-navbar" id="navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/myblog/" class="vp-brand"><img class="vp-nav-logo" src="/myblog/logo.png" alt="blog"><!----><span class="vp-site-name hide-in-pad">blog</span></a><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a href="/myblog/" class="nav-link" aria-label="主页"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="页面开发"><span class="title"><span class="font-icon icon iconfont icon-network" style=""></span>页面开发</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/web/VuePress.html" class="nav-link" aria-label="VuePress"><span class="font-icon icon iconfont icon-vue" style=""></span>VuePress<!----></a></li><li class="dropdown-item"><a href="/myblog/web/docsify.html" class="nav-link" aria-label="docsify"><span class="font-icon icon iconfont icon-edit" style=""></span>docsify<!----></a></li><li class="dropdown-item"><a href="/myblog/deploy/VPS.html" class="nav-link" aria-label="服务器 VPS"><span class="font-icon icon iconfont icon-IO" style=""></span>服务器 VPS<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="应用"><span class="title"><span class="font-icon icon iconfont icon-app" style=""></span>应用</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/apps/Applist.html" class="nav-link" aria-label="必备应用"><span class="font-icon icon iconfont icon-list" style=""></span>必备应用<!----></a></li><li class="dropdown-item"><a href="/myblog/apps/ChatGPT.html" class="nav-link" aria-label="ChatGPT"><span class="font-icon icon iconfont icon-creative" style=""></span>ChatGPT<!----></a></li><li class="dropdown-item"><a href="/myblog/apps/design.html" class="nav-link" aria-label="平面设计"><span class="font-icon icon iconfont icon-pic" style=""></span>平面设计<!----></a></li><li class="dropdown-item"><a href="/myblog/apps/AppNotes.html" class="nav-link" aria-label="工具笔记"><span class="font-icon icon iconfont icon-plugin" style=""></span>工具笔记<!----></a></li><li class="dropdown-item"><a href="/myblog/apps/Chrome.html" class="nav-link" aria-label="Chrome 扩展"><span class="font-icon icon iconfont icon-chrome" style=""></span>Chrome 扩展<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="专业知识"><span class="title"><span class="font-icon icon iconfont icon-computer" style=""></span>专业知识</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/professional_knowledge/computer_network/01.html" class="nav-link" aria-label="计算机网络"><span class="font-icon icon iconfont icon-network" style=""></span>计算机网络<!----></a></li><li class="dropdown-item"><a href="/myblog/professional_knowledge/software_engineer/01.html" class="nav-link" aria-label="软件工程"><span class="font-icon icon iconfont icon-repair" style=""></span>软件工程<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="前端"><span class="title"><span class="font-icon icon iconfont icon-html" style=""></span>前端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>基础三剑客</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_base/html_css/01.html" class="nav-link" aria-label="html/css"><span class="font-icon icon iconfont icon-html" style=""></span>html/css<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_base/javascript/01.html" class="nav-link" aria-label="javascript"><span class="font-icon icon iconfont icon-javascript" style=""></span>javascript<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>css提高</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/front_end/css_advanced/less/01.html" class="nav-link" aria-label="less"><span class="font-icon icon iconfont icon-css" style=""></span>less<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/css_advanced/scss/01.html" class="nav-link" aria-label="scss"><span class="font-icon icon iconfont icon-css" style=""></span>scss<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/css_advanced/tailwind/01.html" class="nav-link" aria-label="tailwind"><span class="font-icon icon iconfont icon-css" style=""></span>tailwind<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>js提高</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/front_end/js_advanced/es6/01.html" class="nav-link" aria-label="es6"><span class="font-icon icon iconfont icon-es6" style=""></span>es6<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/js_advanced/ajax/01.html" class="nav-link" aria-label="ajax"><span class="font-icon icon iconfont icon-ajax" style=""></span>ajax<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/js_advanced/echarts/01.html" class="nav-link" aria-label="echarts"><span class="font-icon icon iconfont icon-javascript" style=""></span>echarts<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/js_advanced/webpack/01.html" class="nav-link" aria-label="webpack"><span class="font-icon icon iconfont icon-javascript" style=""></span>webpack<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/js_advanced/typescript/01.html" class="nav-link" aria-label="typescript"><span class="font-icon icon iconfont icon-typescript" style=""></span>typescript<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_framework/vue2/01.html" class="nav-link" aria-label="vue2"><span class="font-icon icon iconfont icon-vue" style=""></span>vue2<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_framework/vue3/01.html" class="nav-link" aria-label="vue3"><span class="font-icon icon iconfont icon-vue" style=""></span>vue3<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_framework/uniapp/01.html" class="nav-link" aria-label="uniapp"><span class="font-icon icon iconfont icon-wechat" style=""></span>uniapp<!----></a></li><li class="dropdown-subitem"><a href="/myblog/front_end/front_end_framework/react/01.html" class="nav-link" aria-label="react"><span class="font-icon icon iconfont icon-react" style=""></span>react<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其它</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/front_end/other/electron/01.html" class="nav-link" aria-label="electron"><span class="font-icon icon iconfont icon-javascript" style=""></span>electron<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="服务端"><span class="title"><span class="font-icon icon iconfont icon-page" style=""></span>服务端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/back_end/nodeJs/01.html" class="nav-link" aria-label="nodeJs"><span class="font-icon icon iconfont icon-nodeJS" style=""></span>nodeJs<!----></a></li><li class="dropdown-item"><a href="/myblog/back_end/linux/01.html" class="nav-link" aria-label="linux"><span class="font-icon icon iconfont icon-linux" style=""></span>linux<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/back_end/database/mysql/01.html" class="nav-link" aria-label="mysql"><span class="font-icon icon iconfont icon-mysql" style=""></span>mysql<!----></a></li><li class="dropdown-subitem"><a href="/myblog/back_end/database/mongodb/01.html" class="nav-link" aria-label="mongodb"><span class="font-icon icon iconfont icon-mysql" style=""></span>mongodb<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="工具"><span class="title"><span class="font-icon icon iconfont icon-tool" style=""></span>工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/tool/git/01.html" class="nav-link" aria-label="git"><span class="font-icon icon iconfont icon-git" style=""></span>git<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>前端代码规范化</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/tool/lint/01.html" class="nav-link" aria-label="JS 代码规范"><span class="font-icon icon iconfont icon-javascript" style=""></span>JS 代码规范<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/lint/02.html" class="nav-link" aria-label="CSS 代码规范"><span class="font-icon icon iconfont icon-css" style=""></span>CSS 代码规范<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/lint/03.html" class="nav-link" aria-label="Git 规范化"><span class="font-icon icon iconfont icon-git" style=""></span>Git 规范化<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>软件推荐与配置</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/software/cross-platform.html" class="nav-link" aria-label="多平台软件"><!---->多平台软件<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/software/windows.html" class="nav-link" aria-label="windows"><!---->windows<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/software/browser.html" class="nav-link" aria-label="browser"><!---->browser<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/software/vscode.html" class="nav-link" aria-label="vscode"><!---->vscode<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/software/webstorm.html" class="nav-link" aria-label="webstorm"><!---->webstorm<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/online-tools.html" class="nav-link" aria-label="在线工具"><!---->在线工具<!----></a></li><li class="dropdown-subitem"><a href="/myblog/tool/efficiency/bookmark-scripts.html" class="nav-link" aria-label="书签脚本"><!---->书签脚本<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-network" style=""></span><span class="title">计算机网络</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/myblog/professional_knowledge/computer_network/01.html" class="nav-link sidebar-link sidebar-page" aria-label="01 【计算机网络-概述】"><!---->01 【计算机网络-概述】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/computer_network/02.html" class="nav-link sidebar-link sidebar-page" aria-label="02 【计算机网络-物理层】"><!---->02 【计算机网络-物理层】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/computer_network/03.html" class="nav-link sidebar-link sidebar-page" aria-label="03 【计算机网络-数据链路层】"><!---->03 【计算机网络-数据链路层】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/computer_network/04.html" class="nav-link sidebar-link sidebar-page" aria-label="04 【计算机网络-网络层】"><!---->04 【计算机网络-网络层】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="05 【计算机网络-运输层】"><!---->05 【计算机网络-运输层】<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-运输层概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.运输层概述"><!---->1.运输层概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 概念"><!---->1.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-2-总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 总结"><!---->1.2 总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-运输层端口号、复用与分用的概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.运输层端口号、复用与分用的概念"><!---->2.运输层端口号、复用与分用的概念<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-1-为什么用端口号" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 为什么用端口号"><!---->2.1 为什么用端口号<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-2-发送方的复用和接收方的分用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 发送方的复用和接收方的分用"><!---->2.2 发送方的复用和接收方的分用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-3-tcp-ip体系的应用层常用协议所使用的运输层熟知端口号" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号"><!---->2.3 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-4-运输层传输流程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 运输层传输流程"><!---->2.4 运输层传输流程<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-udp和tcp的对比" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.UDP和TCP的对比"><!---->3.UDP和TCP的对比<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 概念"><!---->3.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-2-用户数据报协议udp-user-datagram-protocol" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 用户数据报协议UDP（User Datagram Protocol）"><!---->3.2 用户数据报协议UDP（User Datagram Protocol）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-3-传输控制协议tcp-transmission-control-protocol" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 传输控制协议TCP（Transmission Control Protocol）"><!---->3.3 传输控制协议TCP（Transmission Control Protocol）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-4-总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 总结"><!---->3.4 总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-tcp的流量控制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.TCP的流量控制"><!---->4.TCP的流量控制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 概念"><!---->4.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-2-总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 总结"><!---->4.2 总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-tcp的拥塞控制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.TCP的拥塞控制"><!---->5.TCP的拥塞控制<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 概念"><!---->5.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-2-拥塞控制的算法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 拥塞控制的算法"><!---->5.2 拥塞控制的算法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_6-tcp超时重传时间的选择" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.TCP超时重传时间的选择"><!---->6.TCP超时重传时间的选择<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_7-tcp可靠传输的实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.TCP可靠传输的实现"><!---->7.TCP可靠传输的实现<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-tcp的运输连接管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.TCP的运输连接管理"><!---->8.TCP的运输连接管理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 概念"><!---->8.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-2-tcp的连接建立" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 TCP的连接建立"><!---->8.2 TCP的连接建立<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#tcp的连接释放" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="TCP的连接释放"><!---->TCP的连接释放<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_9-tcp报文段的首部格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.TCP报文段的首部格式"><!---->9.TCP报文段的首部格式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_9-1-各字段的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.1 各字段的作用"><!---->9.1 各字段的作用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/computer_network/06.html" class="nav-link sidebar-link sidebar-page" aria-label="06 【计算机网络-应用层】"><!---->06 【计算机网络-应用层】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-repair" style=""></span><span class="title">软件工程</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/01.html" class="nav-link sidebar-link sidebar-page" aria-label="01 【软件工程学概述】"><!---->01 【软件工程学概述】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/02.html" class="nav-link sidebar-link sidebar-page" aria-label="02 【可行性研究】"><!---->02 【可行性研究】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/03.html" class="nav-link sidebar-link sidebar-page" aria-label="03 【需求分析】"><!---->03 【需求分析】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/04.html" class="nav-link sidebar-link sidebar-page" aria-label="04 【总体设计】"><!---->04 【总体设计】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/05.html" class="nav-link sidebar-link sidebar-page" aria-label="05 【详细设计】"><!---->05 【详细设计】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/06.html" class="nav-link sidebar-link sidebar-page" aria-label="06 【软件测试】"><!---->06 【软件测试】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/07.html" class="nav-link sidebar-link sidebar-page" aria-label="07 【面向对象方法学引论】"><!---->07 【面向对象方法学引论】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/08.html" class="nav-link sidebar-link sidebar-page" aria-label="08 【面向对象分析】"><!---->08 【面向对象分析】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/09.html" class="nav-link sidebar-link sidebar-page" aria-label="09 【面向对象设计】"><!---->09 【面向对象设计】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/myblog/professional_knowledge/software_engineer/10.html" class="nav-link sidebar-link sidebar-page" aria-label="10 【面向对象实现】"><!---->10 【面向对象实现】<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="vp-page" id="main-content"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->05 【计算机网络-运输层】</h1><div class="page-info"><!----><!----><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 6431 字</span><meta property="wordCount" content="6431"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 21 分钟</span><meta property="timeRequired" content="PT21M"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" id="ArtalkPV" data-path="/myblog/professional_knowledge/computer_network/05.html">...</span></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-运输层概述" class="router-link-active router-link-exact-active toc-link level2">1.运输层概述</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-1-概念" class="router-link-active router-link-exact-active toc-link level3">1.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_1-2-总结" class="router-link-active router-link-exact-active toc-link level3">1.2 总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-运输层端口号、复用与分用的概念" class="router-link-active router-link-exact-active toc-link level2">2.运输层端口号、复用与分用的概念</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-1-为什么用端口号" class="router-link-active router-link-exact-active toc-link level3">2.1 为什么用端口号</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-2-发送方的复用和接收方的分用" class="router-link-active router-link-exact-active toc-link level3">2.2 发送方的复用和接收方的分用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-3-tcp-ip体系的应用层常用协议所使用的运输层熟知端口号" class="router-link-active router-link-exact-active toc-link level3">2.3 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_2-4-运输层传输流程" class="router-link-active router-link-exact-active toc-link level3">2.4 运输层传输流程</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-udp和tcp的对比" class="router-link-active router-link-exact-active toc-link level2">3.UDP和TCP的对比</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-1-概念" class="router-link-active router-link-exact-active toc-link level3">3.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-2-用户数据报协议udp-user-datagram-protocol" class="router-link-active router-link-exact-active toc-link level3">3.2 用户数据报协议UDP（User Datagram Protocol）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-3-传输控制协议tcp-transmission-control-protocol" class="router-link-active router-link-exact-active toc-link level3">3.3 传输控制协议TCP（Transmission Control Protocol）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_3-4-总结" class="router-link-active router-link-exact-active toc-link level3">3.4 总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-tcp的流量控制" class="router-link-active router-link-exact-active toc-link level2">4.TCP的流量控制</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-1-概念" class="router-link-active router-link-exact-active toc-link level3">4.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_4-2-总结" class="router-link-active router-link-exact-active toc-link level3">4.2 总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-tcp的拥塞控制" class="router-link-active router-link-exact-active toc-link level2">5.TCP的拥塞控制</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-1-概念" class="router-link-active router-link-exact-active toc-link level3">5.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_5-2-拥塞控制的算法" class="router-link-active router-link-exact-active toc-link level3">5.2 拥塞控制的算法</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_6-tcp超时重传时间的选择" class="router-link-active router-link-exact-active toc-link level2">6.TCP超时重传时间的选择</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_7-tcp可靠传输的实现" class="router-link-active router-link-exact-active toc-link level2">7.TCP可靠传输的实现</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-tcp的运输连接管理" class="router-link-active router-link-exact-active toc-link level2">8.TCP的运输连接管理</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-1-概念" class="router-link-active router-link-exact-active toc-link level3">8.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_8-2-tcp的连接建立" class="router-link-active router-link-exact-active toc-link level3">8.2 TCP的连接建立</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#tcp的连接释放" class="router-link-active router-link-exact-active toc-link level3">TCP的连接释放</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_9-tcp报文段的首部格式" class="router-link-active router-link-exact-active toc-link level2">9.TCP报文段的首部格式</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/myblog/professional_knowledge/computer_network/05.html#_9-1-各字段的作用" class="router-link-active router-link-exact-active toc-link level3">9.1 各字段的作用</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="_05-【计算机网络-运输层】" tabindex="-1"><a class="header-anchor" href="#_05-【计算机网络-运输层】" aria-hidden="true">#</a> 05 【计算机网络-运输层】</h1><h2 id="_1-运输层概述" tabindex="-1"><a class="header-anchor" href="#_1-运输层概述" aria-hidden="true">#</a> 1.运输层概述</h2><h3 id="_1-1-概念" tabindex="-1"><a class="header-anchor" href="#_1-1-概念" aria-hidden="true">#</a> 1.1 概念</h3><p><strong>进程之间的通信</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/c3e0dc7e84683c20677b3b4689d2e6ce3493119651743993.png" alt="image-20240618101829778" tabindex="0" loading="lazy"><figcaption>image-20240618101829778</figcaption></figure><ul><li>从通信和信息处理的角度看，运输层向它上面的应用层提供通信服务，<strong>它属于面向通信部分的最高层，同时也是用户功能中的最低层</strong>。</li><li>当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时，<strong>只有位于网络边缘部分的主机的协议栈才有运输层</strong>，而网络核心部分中的路由器在转发分组时都只用到三层（到网络层）的功能。</li></ul><figure><img src="https://i0.hdslb.com/bfs/article/30a56757c3504a8db1e8b5bec1c313323493119651743993.png" alt="image-20240618102252050" tabindex="0" loading="lazy"><figcaption>image-20240618102252050</figcaption></figure><p><strong>进程之间通信流程</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/b2f841cb1288302a9a5e25bf31e1898b3493119651743993.png" alt="image-20240618102259386" tabindex="0" loading="lazy"><figcaption>image-20240618102259386</figcaption></figure><p>“逻辑通信”是指运输层之间的通信好像是沿水平方向传送数据，但事实上，这两条数据并没有一条水平方向的物理连接，要传送的数据是沿着图中上下多次的虚线方向传送的</p><blockquote><p>进程Ap1与Ap4之间进行基于网络的通信，进程Ap2与Ap3之间进行基于网络的通信</p><p>在运输层使用不同的端口，来对应不同的应用进程</p><p>然后通过网络层及其下层来传输应用层报文</p><p>接收方的运输层通过不同的端口，将收到的应用层报文，交付给应用层中相应的应用进程</p><p>这里端口并不是指看得见、摸得着的物理端口，而是指用来区分不同应用进程的标识符</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/e88c53330c0f113fa3097e72485489913493119651743993.png" alt="image-20240618102309020" tabindex="0" loading="lazy"><figcaption>image-20240618102309020</figcaption></figure><h3 id="_1-2-总结" tabindex="-1"><a class="header-anchor" href="#_1-2-总结" aria-hidden="true">#</a> 1.2 总结</h3><figure><img src="https://i0.hdslb.com/bfs/article/f0d39f729c68f5550a46ecf0605b73333493119651743993.png" alt="image-20240618102313962" tabindex="0" loading="lazy"><figcaption>image-20240618102313962</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/82055d6c51a36cd587ea85bd2a9e5bef3493119651743993.png" alt="image-20240618102319166" tabindex="0" loading="lazy"><figcaption>image-20240618102319166</figcaption></figure><h2 id="_2-运输层端口号、复用与分用的概念" tabindex="-1"><a class="header-anchor" href="#_2-运输层端口号、复用与分用的概念" aria-hidden="true">#</a> 2.运输层端口号、复用与分用的概念</h2><h3 id="_2-1-为什么用端口号" tabindex="-1"><a class="header-anchor" href="#_2-1-为什么用端口号" aria-hidden="true">#</a> 2.1 为什么用端口号</h3><figure><img src="https://i0.hdslb.com/bfs/article/276cbd0233bca45698d93db10f8e57cd3493119651743993.png" alt="image-20240618102324925" tabindex="0" loading="lazy"><figcaption>image-20240618102324925</figcaption></figure><h3 id="_2-2-发送方的复用和接收方的分用" tabindex="-1"><a class="header-anchor" href="#_2-2-发送方的复用和接收方的分用" aria-hidden="true">#</a> 2.2 发送方的复用和接收方的分用</h3><figure><img src="https://i0.hdslb.com/bfs/article/e4e97cfec216982ad719a2f204068c8e3493119651743993.png" alt="image-20240618102330609" tabindex="0" loading="lazy"><figcaption>image-20240618102330609</figcaption></figure><blockquote><p><strong>多个进程（这里一个端口表示一个进程）</strong> 利用一个运输层协议（或者称为运输层接口）<strong>发送</strong>数据称为 <strong>复用</strong></p><p><strong>多个进程（这里一个端口表示一个进程）</strong> 利用一个运输层协议（或者称为运输层接口）<strong>接收</strong>时叫做 <strong>分用</strong>。</p></blockquote><h3 id="_2-3-tcp-ip体系的应用层常用协议所使用的运输层熟知端口号" tabindex="-1"><a class="header-anchor" href="#_2-3-tcp-ip体系的应用层常用协议所使用的运输层熟知端口号" aria-hidden="true">#</a> 2.3 TCP/IP体系的应用层常用协议所使用的运输层熟知端口号</h3><figure><img src="https://i0.hdslb.com/bfs/article/89134f6fb06b1a1672bd3274e0a29bb73493119651743993.png" alt="image-20240618102337880" tabindex="0" loading="lazy"><figcaption>image-20240618102337880</figcaption></figure><h3 id="_2-4-运输层传输流程" tabindex="-1"><a class="header-anchor" href="#_2-4-运输层传输流程" aria-hidden="true">#</a> 2.4 运输层传输流程</h3><p>举例</p><figure><img src="https://i0.hdslb.com/bfs/article/cb6788d9697eefdebc6935ad14e0065c3493119651743993.png" alt="image-20240618102343069" tabindex="0" loading="lazy"><figcaption>image-20240618102343069</figcaption></figure><blockquote><p>在浏览器输入域名，回车浏览</p><p>然后用户PC中的DNS客户端进程会发送一个DNS查询请求报文</p><p>DNS查询请求报文需要使用运输层的UDP协议</p><p>首部中的源端口字段的值，在短暂端口号49151~65535中挑选一个未被占用的，用来表示DNS客户端进程</p><p>首部中的目的端口字段的值：53，是DNS服务器端进程所使用的熟知端口号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/4de165cecba5aa27b0e5a548916ef8033493119651743993.png" alt="image-20240618102349485" tabindex="0" loading="lazy"><figcaption>image-20240618102349485</figcaption></figure><blockquote><p>之后，将UDP用户数据报封装在IP数据报中，通过以太网发送给DNS服务器</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/a1b08021974f3ad5605b0ba86e2024393493119651743993.png" alt="image-20240618102357114" tabindex="0" loading="lazy"><figcaption>image-20240618102357114</figcaption></figure><blockquote><p>DNS服务器收到该IP数据报后，从中解封出UDP用户数据报</p><p>UDP首部中的目的端口号为53，这表明应将该UDP用户数据报的数据载荷部分，也就是DNS查询请求报文，交付给本服务器中的DNS服务器端进程</p><p>DNS服务器端进程解析DNS查询请求报文的内容，然后按其要求查找对应的IP地址</p><p>之后，会给用户PC发送DNS响应报文，DNS响应报文需要使用运输层的UDP协议封装成UDP用户数据报</p><p>其首部中的源端口字段的值设置为熟知端口号53，表明这是DNS服务器端进程所发送的UDP用户数据报，目的端口的值设置为49152，这是之前用户PC中发送DNS查询请求报文的DNS客户端进程所使用的短暂端口号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/fcf48d7ae2cadc3cb33e329e3722e4d33493119651743993.png" alt="image-20240618102405439" tabindex="0" loading="lazy"><figcaption>image-20240618102405439</figcaption></figure><blockquote><p>将UDP用户数据报封装在IP数据报中，通过以太网发送给用户PC</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/4506e17482249b9b99788eb9939901483493119651743993.png" alt="image-20240618102410597" tabindex="0" loading="lazy"><figcaption>image-20240618102410597</figcaption></figure><blockquote><p>用户PC收到该数据报后，从中解封出UDP用户数据报</p><p>UDP首部中的目的端口号为49152，这表明应将该UDP用户数据报的数据载荷部分，也就是DNS响应报文，交付给用户PC中的DNS客户端进程</p><p>DNS客户端进程解析DNS响应报文的内容，就可知道自己之前所请求的Web服务器的域名对应的IP地址</p></blockquote><p>现在用户PC中的HTTP客户端进程可以向Web服务器发送HTTP请求报文（和DNS发送和接收流程差不多）</p><figure><img src="https://i0.hdslb.com/bfs/article/7f29e1fcf80efea131ac9c22c840b45f3493119651743993.png" alt="image-20240618102418400" tabindex="0" loading="lazy"><figcaption>image-20240618102418400</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/2410a92bb446c0bfd76ec59f1ce50c733493119651743993.png" alt="image-20240618102429624" tabindex="0" loading="lazy"><figcaption>image-20240618102429624</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/529bb5bd438d93c1fb133abd72ca1d163493119651743993.png" alt="image-20240618102437020" tabindex="0" loading="lazy"><figcaption>image-20240618102437020</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/1239d3bf381aee8194cc8a65b91db3443493119651743993.png" alt="image-20240618102453184" tabindex="0" loading="lazy"><figcaption>image-20240618102453184</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/576ddcc5ab4c8e6c2f6da8ff646a1f383493119651743993.png" alt="image-20240618102508759" tabindex="0" loading="lazy"><figcaption>image-20240618102508759</figcaption></figure><h2 id="_3-udp和tcp的对比" tabindex="-1"><a class="header-anchor" href="#_3-udp和tcp的对比" aria-hidden="true">#</a> 3.UDP和TCP的对比</h2><h3 id="_3-1-概念" tabindex="-1"><a class="header-anchor" href="#_3-1-概念" aria-hidden="true">#</a> 3.1 概念</h3><ul><li><strong>UDP</strong> 和 <strong>TCP</strong> 是TCP/IP体系结构<strong>运输层</strong>中的两个重要协议</li><li>当运输层采用面向连接的 <strong>TCP</strong> 协议时，尽管下面的网络是不可靠的（只提供尽最大努力服务），但这种逻辑通信信道就相当于一条<strong>全双工的可靠信道</strong>。</li><li>当运输层采用无连接的 <strong>UDP</strong> 协议时，这种逻辑通信信道是一条<strong>不可靠信道</strong>。</li></ul><p>可靠信道与不可靠信道</p><figure><img src="https://i0.hdslb.com/bfs/article/44fdbb3c23e9722eaa0d659d22ec09a23493119651743993.png" alt="image-20240618102513872" tabindex="0" loading="lazy"><figcaption>image-20240618102513872</figcaption></figure><ul><li><p>两个对等运输实体在通信时传送的数据单位叫作<strong>运输协议数据单元</strong> TPDU (Transport Protocol Data Unit)。</p></li><li><p>TCP 传送的数据单位协议是 <strong>TCP 报文段</strong>(segment)。</p></li><li><p>UDP 传送的数据单位协议是 <strong>UDP 报文</strong>或<strong>用户数据报</strong>。</p></li></ul><figure><img src="https://i0.hdslb.com/bfs/article/5116e0cf677cf58ee236994c19f87d0f3493119651743993.png" alt="image-20240618102523451" tabindex="0" loading="lazy"><figcaption>image-20240618102523451</figcaption></figure><p>UDP的通信是无连接的，不需要套接字（Socket）</p><p>TCP是面向连接的，TCP之间的通信必须要在两个套接字（Socket）之间建立连接</p><h3 id="_3-2-用户数据报协议udp-user-datagram-protocol" tabindex="-1"><a class="header-anchor" href="#_3-2-用户数据报协议udp-user-datagram-protocol" aria-hidden="true">#</a> 3.2 用户数据报协议UDP（User Datagram Protocol）</h3><p>可以发送广播</p><figure><img src="https://i0.hdslb.com/bfs/article/4ee93029a0fec95673ba67e1037968303493119651743993.png" alt="image-20240618102529815" tabindex="0" loading="lazy"><figcaption>image-20240618102529815</figcaption></figure><p>可以向某个多播组发送多播</p><figure><img src="https://i0.hdslb.com/bfs/article/423ec3db0f60120074a96ec9fe61541e3493119651743993.png" alt="image-20240618102538525" tabindex="0" loading="lazy"><figcaption>image-20240618102538525</figcaption></figure><p>还可以发送单播</p><figure><img src="https://i0.hdslb.com/bfs/article/3172a3b95a7a2f10fa2966c8f6d81b383493119651743993.png" alt="image-20240618102544251" tabindex="0" loading="lazy"><figcaption>image-20240618102544251</figcaption></figure><blockquote><p>UDP 支持单播、多播以及广播</p><p>换句话说，UDP支持一对一，一对多，以及一对全的通信</p></blockquote><p>运输过程</p><figure><img src="https://i0.hdslb.com/bfs/article/ecb39ae00b21517fb4938d267384f03a3493119651743993.png" alt="image-20240618102550174" tabindex="0" loading="lazy"><figcaption>image-20240618102550174</figcaption></figure><blockquote><p>UDP对应用进程交下来的报文既不合并也不拆分，而是保留这些报文的边界</p><p>换句话说，UDP是面向应用报文的</p></blockquote><p>UDP向上层提供无连接不可靠传输服务</p><figure><img src="https://i0.hdslb.com/bfs/article/9df3495ab7cff1d091b96a2fca5af8af3493119651743993.png" alt="image-20240618102557480" tabindex="0" loading="lazy"><figcaption>image-20240618102557480</figcaption></figure><p>UDP结构</p><figure><img src="https://i0.hdslb.com/bfs/article/f7e47f658418ac19dbd31b2bc94c756c3493119651743993.png" alt="image-20240618102603173" tabindex="0" loading="lazy"><figcaption>image-20240618102603173</figcaption></figure><h3 id="_3-3-传输控制协议tcp-transmission-control-protocol" tabindex="-1"><a class="header-anchor" href="#_3-3-传输控制协议tcp-transmission-control-protocol" aria-hidden="true">#</a> 3.3 传输控制协议TCP（Transmission Control Protocol）</h3><p>使用TCP协议的通信双方，在进行数据传输之前，必须使用“三报文握手”建立TCP连接</p><figure><img src="https://i0.hdslb.com/bfs/article/627cbe4956173d9d3864db6abff706fa3493119651743993.png" alt="image-20240618102612746" tabindex="0" loading="lazy"><figcaption>image-20240618102612746</figcaption></figure><p>TCP连接建立成功后，通信双方之间就好像有一条可靠的通信信道，通信双方使用这条基于TCP连接的可靠信道进行通信</p><figure><img src="https://i0.hdslb.com/bfs/article/a40e4b6d372a3a746e508e1b3dfe09843493119651743993.png" alt="image-20240618102621957" tabindex="0" loading="lazy"><figcaption>image-20240618102621957</figcaption></figure><blockquote><p>很显然，TCP仅支持单播，也就是一对一的通信</p></blockquote><p>运输过程</p><figure><img src="https://i0.hdslb.com/bfs/article/296e957ed82c38796f0fdafef4114ff83493119651743993.png" alt="image-20240618102638027" tabindex="0" loading="lazy"><figcaption>image-20240618102638027</figcaption></figure><blockquote><p>发送方</p><ul><li><p>TCP会把应用进程交付下来的数据块看作是一连串无结构的字节流，TCP并不知道这些待传送的字节流的含义</p></li><li><p>并将他们编号，并存储在自己发送缓存中</p></li><li><p>TCP会根据发送策略，提取一定量的字节构建TCP报文并发送</p></li></ul><p>接收方</p><ul><li>一方面从所接受到的TCP报文段中，取出数据载荷部分并存储在接收缓存中；一方面将接收缓存中的一些字节交付给应用进程</li><li>TCP不保证接收方应用进程所收到的数据块与发送方发送的数据块，具有对应大小的关系（例如，发送方应用进程交给发送方的TCP共10个数据块，但接收方的TCP可能只用了4个数据块，就把收到的字节流交付给了上层的应用进程，但接收方收到的字节流必须和发送方应用进程发出的字节流完全一样）</li><li>接收方的应用进程必须有能力识别收到的字节流，把它还原成有意义的应用层数据</li></ul><p>TCP是面向字节流的，这正是TCP实现可靠传输、流量控制、以及拥塞控制的基础</p><p>本图只画了一个方向的数据流，在实际网络中，基于TCP连接的两端，可以同时进行TCP报文段的发送和接收</p></blockquote><p>TCP向上层提供面向连接的可靠传输服务</p><figure><img src="https://i0.hdslb.com/bfs/article/236362fb3f6d618f31adda2ac21d81683493119651743993.png" alt="image-20240618102646806" tabindex="0" loading="lazy"><figcaption>image-20240618102646806</figcaption></figure><p>TCP结构</p><figure><img src="https://i0.hdslb.com/bfs/article/27498568cce4d4c4eec1ab764142d1fb3493119651743993.png" alt="image-20240618102653145" tabindex="0" loading="lazy"><figcaption>image-20240618102653145</figcaption></figure><h3 id="_3-4-总结" tabindex="-1"><a class="header-anchor" href="#_3-4-总结" aria-hidden="true">#</a> 3.4 总结</h3><figure><img src="https://i0.hdslb.com/bfs/article/bd5d38d070f5b66c6f7d0e68e8cc92d13493119651743993.png" alt="image-20240618102700225" tabindex="0" loading="lazy"><figcaption>image-20240618102700225</figcaption></figure><h2 id="_4-tcp的流量控制" tabindex="-1"><a class="header-anchor" href="#_4-tcp的流量控制" aria-hidden="true">#</a> 4.TCP的流量控制</h2><h3 id="_4-1-概念" tabindex="-1"><a class="header-anchor" href="#_4-1-概念" aria-hidden="true">#</a> 4.1 概念</h3><figure><img src="https://i0.hdslb.com/bfs/article/ee533d7565da67380364d51bc80216593493119651743993.png" alt="image-20240618102708937" tabindex="0" loading="lazy"><figcaption>image-20240618102708937</figcaption></figure><p>举例</p><p><a href="https://www.bilibili.com/video/BV1c4411d7jb?p=60" target="_blank" rel="noopener noreferrer">具体流程的视频<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://i0.hdslb.com/bfs/article/749922f17e2fa3773d5ebf27a02a882b3493119651743993.png" alt="image-20240618102716188" tabindex="0" loading="lazy"><figcaption>image-20240618102716188</figcaption></figure><p>上图主机A现在可将发送缓存中序号1~200的字节数据全部删除，因为已经收到了主机B对它们的累计确认</p><figure><img src="https://i0.hdslb.com/bfs/article/b44e62e7393386de8d9255ecc7196e043493119651743993.png" alt="image-20240618102722500" tabindex="0" loading="lazy"><figcaption>image-20240618102722500</figcaption></figure><p>上图主机A现在可将发送缓存中序号201~500的字节数据全部删除，因为已经收到了主机B对它们的累计确认</p><figure><img src="https://i0.hdslb.com/bfs/article/0848fa470d68b48f2d56ad583c0793b23493119651743993.png" alt="image-20240618102748989" tabindex="0" loading="lazy"><figcaption>image-20240618102748989</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/716aa27d821f72d3e24084da6e8271223493119651743993.png" alt="image-20240618102814545" tabindex="0" loading="lazy"><figcaption>image-20240618102814545</figcaption></figure><p>上图主机A现在可将发送缓存中序号501~600的字节数据全部删除，因为已经收到了主机B对它们的累计确认</p><figure><img src="https://i0.hdslb.com/bfs/article/e356b4ee195d75a1c3d9179f3b39b74e3493119651743993.png" alt="image-20240618103732399" tabindex="0" loading="lazy"><figcaption>image-20240618103732399</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/02911970f0ce9940e56fbe18e7b79c353493119651743993.png" alt="image-20240618103738301" tabindex="0" loading="lazy"><figcaption>image-20240618103738301</figcaption></figure><blockquote><p>上图如果零窗口探测报文在发送过程中如果丢失，还是能打破死锁局面</p><p>因为零窗口探测报文段也有重传计时器，重传计时器超时后，零窗口探测报文段会被重传</p></blockquote><h3 id="_4-2-总结" tabindex="-1"><a class="header-anchor" href="#_4-2-总结" aria-hidden="true">#</a> 4.2 总结</h3><figure><img src="https://i0.hdslb.com/bfs/article/0660005ecfd010b1096398e2e24029813493119651743993.png" alt="image-20240618102909642" tabindex="0" loading="lazy"><figcaption>image-20240618102909642</figcaption></figure><h2 id="_5-tcp的拥塞控制" tabindex="-1"><a class="header-anchor" href="#_5-tcp的拥塞控制" aria-hidden="true">#</a> 5.TCP的拥塞控制</h2><h3 id="_5-1-概念" tabindex="-1"><a class="header-anchor" href="#_5-1-概念" aria-hidden="true">#</a> 5.1 概念</h3><figure><img src="https://i0.hdslb.com/bfs/article/fbedf0e3d0e1207316ef82f34fbc88a33493119651743993.png" alt="image-20240618102921109" tabindex="0" loading="lazy"><figcaption>image-20240618102921109</figcaption></figure><p><strong>网络拥塞往往是由许多因素引起的。例如：</strong></p><ol><li>点缓存的容量太小；</li><li>链路的容量不足；</li><li>处理机处理的速率太慢；</li><li>拥塞本身会进一步加剧拥塞；</li></ol><p><strong>拥塞控制的一般原理</strong></p><ul><li>拥塞控制的前提：网络能够承受现有的网络负荷。</li><li>实践证明，拥塞控制是很难设计的，因为它是一个<strong>动态问题</strong>。</li><li>分组的丢失是网络发生拥塞的<strong>征兆</strong>而不是原因。</li><li>在许多情况下，甚至正是<strong>拥塞控制本身</strong>成为引起网络性能恶化、甚至发生死锁的原因。</li></ul><p><strong>开环控制和闭环控制</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/1a31fd078653a8dad9db4846340643f33493119651743993.png" alt="image-20240618102930283" tabindex="0" loading="lazy"><figcaption>image-20240618102930283</figcaption></figure><p><strong>监测网络的拥塞</strong></p><p>主要指标有：</p><ol><li>由于缺少缓存空间而被丢弃的分组的百分数；</li><li>平均队列长度；</li><li>超时重传的分组数；</li><li>平均分组时延；</li><li>分组时延的标准差，等等。</li></ol><p>上述这些指标的上升都标志着拥塞的增长。</p><h3 id="_5-2-拥塞控制的算法" tabindex="-1"><a class="header-anchor" href="#_5-2-拥塞控制的算法" aria-hidden="true">#</a> 5.2 拥塞控制的算法</h3><figure><img src="https://i0.hdslb.com/bfs/article/df6afe47393580954420bf20bd04592b3493119651743993.png" alt="image-20240618102940804" tabindex="0" loading="lazy"><figcaption>image-20240618102940804</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/58e17471448a7dd4a9d1d267b621c7ed3493119651743993.png" alt="image-20240618102947532" tabindex="0" loading="lazy"><figcaption>image-20240618102947532</figcaption></figure><blockquote><p>真正的发送窗口值 = Min (接收方窗口值，拥塞窗口值)</p></blockquote><p>下图的实例横纵坐标的意思</p><p>传输轮次：</p><ul><li>发送方给接收方发送数据报文段后，接收方给发送方发发回相应的确认报文段</li><li>一个传输轮次所经历的时间其实就是往返时间，往返时间并非是恒定的数值</li><li>使用传输轮次是为了强调把拥塞窗口所允许发送的报文段都连续发送出去，并受到了对已发送的最后一个报文段的确认</li></ul><p>拥塞窗口：</p><ul><li>它会随网络拥塞程度，以及所使用的拥塞控制算法动态变化</li></ul><h4 id="慢开始和拥塞避免" tabindex="-1"><a class="header-anchor" href="#慢开始和拥塞避免" aria-hidden="true">#</a> 慢开始和拥塞避免</h4><h5 id="慢开始-slow-start" tabindex="-1"><a class="header-anchor" href="#慢开始-slow-start" aria-hidden="true">#</a> 慢开始（slow-start）</h5><ul><li>目的：用来确定网络的负载能力或拥塞程度。</li><li>算法的思路：由小到大逐渐增大拥塞窗口数值。</li><li>两个变量： <ul><li><strong>拥塞窗口（cwnd）</strong>：初始拥塞窗口值：2 种设置方法。窗口值逐渐增大。 <ul><li>1 至 2 个最大报文段 （旧标准）</li><li>2 至 4 个最大报文段 （RFC 5681）</li></ul></li><li><strong>慢开始门限（ssthresh）</strong>：防止拥塞窗口增长过大引起网络拥塞。</li></ul></li></ul><figure><img src="https://i0.hdslb.com/bfs/article/1805397cb9b96370a5c3d95a291a408b3493119651743993.png" alt="image-20240618102955641" tabindex="0" loading="lazy"><figcaption>image-20240618102955641</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/782ef370b39d02011d75bbdd0f5924b23493119651743993.png" alt="image-20240618103000611" tabindex="0" loading="lazy"><figcaption>image-20240618103000611</figcaption></figure><blockquote><p>图中swnd是发送窗口</p><p>每经过一个传输轮次，拥塞窗口就加倍</p><p>窗口大小按<strong>指数增加</strong>，2的n-1次方</p></blockquote><h5 id="拥塞避免-congestion-avoidance" tabindex="-1"><a class="header-anchor" href="#拥塞避免-congestion-avoidance" aria-hidden="true">#</a> 拥塞避免（congestion avoidance）</h5><ul><li>思路：让拥塞窗口 cwnd <strong>缓慢地增大</strong>，避免出现拥塞。</li><li>每经过一个传输轮次，拥塞窗口 <strong>cwnd = cwnd + 1</strong>。</li><li>使拥塞窗口 cwnd 按线性规律缓慢增长。</li><li>在拥塞避免阶段，具有 “<strong>加法增大</strong>” (Additive Increase) 的特点。</li></ul><figure><img src="https://i0.hdslb.com/bfs/article/19b2465ca25678e9c9c0aed3d3f237fb3493119651743993.png" alt="image-20240618103007291" tabindex="0" loading="lazy"><figcaption>image-20240618103007291</figcaption></figure><p>如果在发送过程中出现部分报文段丢失，这必然会造成发送方对这些丢失报文段的超时重传</p><figure><img src="https://i0.hdslb.com/bfs/article/22c277eaba8da6ad8b46ac2eecc5e27e3493119651743993.png" alt="image-20240618103013446" tabindex="0" loading="lazy"><figcaption>image-20240618103013446</figcaption></figure><p>这个时候又回到了慢开始</p><figure><img src="https://i0.hdslb.com/bfs/article/2035c4dac2c5fdac589df1da1c218fc43493119651743993.png" alt="image-20240618103021831" tabindex="0" loading="lazy"><figcaption>image-20240618103021831</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/0a90a1e1d6fa06c83318ba636bf4e1d93493119651743993.png" alt="image-20240618103028747" tabindex="0" loading="lazy"><figcaption>image-20240618103028747</figcaption></figure><h5 id="两个算法完整示意图" tabindex="-1"><a class="header-anchor" href="#两个算法完整示意图" aria-hidden="true">#</a> 两个算法完整示意图</h5><figure><img src="https://i0.hdslb.com/bfs/article/8a104c2c0924495c42f6bafa6d5dee093493119651743993.png" alt="image-20240618103041144" tabindex="0" loading="lazy"><figcaption>image-20240618103041144</figcaption></figure><h4 id="快重传和快恢复" tabindex="-1"><a class="header-anchor" href="#快重传和快恢复" aria-hidden="true">#</a> 快重传和快恢复</h4><figure><img src="https://i0.hdslb.com/bfs/article/9d0509c15083389e60a3bd39a821aa7b3493119651743993.png" alt="image-20240618103046519" tabindex="0" loading="lazy"><figcaption>image-20240618103046519</figcaption></figure><h5 id="快重传-fast-retrasmit" tabindex="-1"><a class="header-anchor" href="#快重传-fast-retrasmit" aria-hidden="true">#</a> 快重传（fast retrasmit）</h5><figure><img src="https://i0.hdslb.com/bfs/article/865a6173247fcf649012682dfa7cc7823493119651743993.png" alt="image-20240618103716805" tabindex="0" loading="lazy"><figcaption>image-20240618103716805</figcaption></figure><h5 id="快恢复-fast-recovery" tabindex="-1"><a class="header-anchor" href="#快恢复-fast-recovery" aria-hidden="true">#</a> 快恢复（fast recovery）</h5><figure><img src="https://i0.hdslb.com/bfs/article/91219a0042415328e5d23851df358d003493119651743993.png" alt="image-20240618103104669" tabindex="0" loading="lazy"><figcaption>image-20240618103104669</figcaption></figure><h5 id="改进后的整体算法的示意图" tabindex="-1"><a class="header-anchor" href="#改进后的整体算法的示意图" aria-hidden="true">#</a> 改进后的整体算法的示意图</h5><figure><img src="https://i0.hdslb.com/bfs/article/7870b19fc828b5d2cd795adcd57e05b73493119651743993.png" alt="image-20240618103111818" tabindex="0" loading="lazy"><figcaption>image-20240618103111818</figcaption></figure><hr><h2 id="_6-tcp超时重传时间的选择" tabindex="-1"><a class="header-anchor" href="#_6-tcp超时重传时间的选择" aria-hidden="true">#</a> 6.TCP超时重传时间的选择</h2><figure><img src="https://i0.hdslb.com/bfs/article/514357751468835c9221b317b93d92f83493119651743993.png" alt="image-20240618103125076" tabindex="0" loading="lazy"><figcaption>image-20240618103125076</figcaption></figure><blockquote><p>如果超时重传时间RTO的值设置得比RTT0的值小很多，这会引起报文段不必要的重传，使网络负荷增大</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/8560f49e4525bdf15a8926d493b7536b3493119651743993.png" alt="image-20240618103130559" tabindex="0" loading="lazy"><figcaption>image-20240618103130559</figcaption></figure><blockquote><p>如果超时重传时间RTO的值设置得远大于RTT0的值，这会使重传时间推迟的太长，使网络的空闲时间增大，降低传输效率</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/cd700cd7ddc0d42de8d5f5682c1733273493119651743993.png" alt="image-20240618103136846" tabindex="0" loading="lazy"><figcaption>image-20240618103136846</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/2082c62ebb40344f744c0b1573e606493493119651743993.png" alt="image-20240618103142153" tabindex="0" loading="lazy"><figcaption>image-20240618103142153</figcaption></figure><p><strong>RFC6298建议使用下式计算超时重传时间RTO</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/831bdd9d86a0657e4f352816c800d6c63493119651743993.png" alt="image-20240618103213066" tabindex="0" loading="lazy"><figcaption>image-20240618103213066</figcaption></figure><p><strong>往返时间RTT的测量比较复杂</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/847f774d1ff50fa1d79c28de160a446b3493119651743993.png" alt="image-20240618103218582" tabindex="0" loading="lazy"><figcaption>image-20240618103218582</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/51fd7a4320b9708fa92b596b4b6691c13493119651743993.png" alt="image-20240618103223809" tabindex="0" loading="lazy"><figcaption>image-20240618103223809</figcaption></figure><p><strong>TCP超时重传的计算</strong></p><p>举例</p><figure><img src="https://i0.hdslb.com/bfs/article/25d6df7902305c5f9a00328372bb04f93493119651743993.png" alt="image-20240618103231333" tabindex="0" loading="lazy"><figcaption>image-20240618103231333</figcaption></figure><p><strong>总结</strong></p><figure><img src="https://i0.hdslb.com/bfs/article/a3727b6468c390409cda58b1217031af3493119651743993.png" alt="image-20240618103236349" tabindex="0" loading="lazy"><figcaption>image-20240618103236349</figcaption></figure><hr><h2 id="_7-tcp可靠传输的实现" tabindex="-1"><a class="header-anchor" href="#_7-tcp可靠传输的实现" aria-hidden="true">#</a> 7.TCP可靠传输的实现</h2><p><a href="https://www.bilibili.com/video/BV1c4411d7jb?p=63" target="_blank" rel="noopener noreferrer">本集具体讲解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://i0.hdslb.com/bfs/article/3856f72478924a2429021df62ef0821f3493119651743993.png" alt="image-20240618103245845" tabindex="0" loading="lazy"><figcaption>image-20240618103245845</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/ee0fb3094d2229fbeb0c2eaa7e8c79f73493119651743993.png" alt="image-20240618103250472" tabindex="0" loading="lazy"><figcaption>image-20240618103250472</figcaption></figure><figure><img src="https://i0.hdslb.com/bfs/article/20c596db0f2b392d444eb8006b66476d3493119651743993.png" alt="image-20240618103255915" tabindex="0" loading="lazy"><figcaption>image-20240618103255915</figcaption></figure><h2 id="_8-tcp的运输连接管理" tabindex="-1"><a class="header-anchor" href="#_8-tcp的运输连接管理" aria-hidden="true">#</a> 8.TCP的运输连接管理</h2><h3 id="_8-1-概念" tabindex="-1"><a class="header-anchor" href="#_8-1-概念" aria-hidden="true">#</a> 8.1 概念</h3><figure><img src="https://i0.hdslb.com/bfs/article/7d61a593d0c807d97ce6543662677fc73493119651743993.png" alt="image-20240618103301043" tabindex="0" loading="lazy"><figcaption>image-20240618103301043</figcaption></figure><h3 id="_8-2-tcp的连接建立" tabindex="-1"><a class="header-anchor" href="#_8-2-tcp的连接建立" aria-hidden="true">#</a> 8.2 TCP的连接建立</h3><ul><li>TCP 建立连接的过程叫做<strong>握手</strong>。</li><li>握手需要在客户和服务器之间交换三个 TCP 报文段。称之为<strong>三报文握手</strong>。</li><li>采用<strong>三报文握手</strong>主要是为了防止已失效的连接请求报文段突然又传送到了，因而产生错误。</li></ul><h4 id="tcp的连接建立要解决以下三个问题" tabindex="-1"><a class="header-anchor" href="#tcp的连接建立要解决以下三个问题" aria-hidden="true">#</a> TCP的连接建立要解决以下三个问题</h4><figure><img src="https://i0.hdslb.com/bfs/article/0835fd0c501ccd1a01dbd7ce39a0a8e03493119651743993.png" alt="image-20240618103306737" tabindex="0" loading="lazy"><figcaption>image-20240618103306737</figcaption></figure><h4 id="tcp使用-三报文握手-建立连接" tabindex="-1"><a class="header-anchor" href="#tcp使用-三报文握手-建立连接" aria-hidden="true">#</a> TCP使用“三报文握手”建立连接</h4><ul><li>TCP 连接的建立<strong>采用客户服务器方式</strong>。</li><li>主动发起连接建立的应用进程叫做<strong>TCP客户</strong> (client)。</li><li>被动等待连接建立的应用进程叫做<strong>TCP服务器</strong> (server)。</li></ul><p>“握手”需要在TCP客户端和服务器之间交换三个TCP报文段</p><p>过程</p><figure><img src="https://i0.hdslb.com/bfs/article/7c9ca919b3eb29d5034c05545822983b3493119651743993.png" alt="image-20240618103311824" tabindex="0" loading="lazy"><figcaption>image-20240618103311824</figcaption></figure><blockquote><p>最初两端的TCP进程都处于关闭状态</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/9bb7673d3035d85eaa62786da5b0ba503493119651743993.png" alt="image-20240618103318598" tabindex="0" loading="lazy"><figcaption>image-20240618103318598</figcaption></figure><blockquote><p>一开始，TCP服务器进程首先创建传输控制块，用来存储TCP连接中的一些重要信息。例如TCP连接表、指向发送和接收缓存的指针、指向重传队列的指针，当前的发送和接收序号等</p><p>之后，就准备接受TCP客户端进程的连接请求</p><p>此时，TCP服务器进程就进入监听状态，等待TCP客户端进程的连接请求</p></blockquote><p>TCP服务器进程是被动等待来自TCP客户端进程的连接请求，因此成为<strong>被动打开</strong>连接</p><figure><img src="https://i0.hdslb.com/bfs/article/6ab4d2cc9274bd042721fee33ae1cd1f3493119651743993.png" alt="image-20240618103326082" tabindex="0" loading="lazy"><figcaption>image-20240618103326082</figcaption></figure><blockquote><p>TCP客户进程也是首先创建传输控制块</p></blockquote><p>由于TCP连接建立是由TCP客户端主动发起的，因此称为<strong>主动打开</strong>连接</p><figure><img src="https://i0.hdslb.com/bfs/article/45c3d90ffc0d65657ed8688ea61360eb3493119651743993.png" alt="image-20240618103331833" tabindex="0" loading="lazy"><figcaption>image-20240618103331833</figcaption></figure><blockquote><p>然后，在打算建立TCP连接时，向TCP服务器进程发送TCP连接请求报文段，并进入同步已发送状态</p><p>TCP连接请求报文段首部中</p><ul><li>同步位SYN被设置为1，表明这是一个TCP连接请求报文段</li><li>序号字段seq被设置了一个初始值x，作为TCP客户端进程所选择的初始序号</li></ul><p>请注意：TCP规定SYN被设置为1的报文段不能携带数据，但要消耗掉一个序号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/7aa4a96c00ea4a7f4d6c78f392b0b9663493119651743993.png" alt="image-20240618103336104" tabindex="0" loading="lazy"><figcaption>image-20240618103336104</figcaption></figure><blockquote><p>TCP服务器进程收到TCP连接请求报文段后，如果同意建立连接，则向TCP客户进程发送TCP连接请求确认报文段，并进入同步已接收状态</p><p>TCP连接请求确认报文段首部中</p><ul><li>同步位SYN和确认为ACK都设置为1，表明这是一个TCP连接请求确认报文段</li><li>序号字段seq被设置了一个初始值y，作为TCP服务器进程所选择的初始序号，</li><li>确认号字段ack的值被设置成了x+1，这是对TCP客户进程所选择的初始序号（seq）的确认</li></ul><p>请注意：这个报文段也不能携带数据，因为它是SYN被设置为1的报文段，但同样要消耗掉一个序号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/216c5e3f909ca19d4968ed2c7e41ccf33493119651743993.png" alt="image-20240618103341914" tabindex="0" loading="lazy"><figcaption>image-20240618103341914</figcaption></figure><blockquote><p>TCP客户进程收到TCP连接请求确认报文段后，还要向TCP服务器进程发送一个普通的TCP确认报文段，并进入连接已建立状态</p><p>普通的TCP确认报文段首部中</p><ul><li>确认位ACK被设置为1，表明这是一个普通的TCP确认报文段</li><li>序号字段seq被设置为x+1，这是因为TCP客户进程发送的第一个TCP报文段的序号为x，所以TCP客户进程发送的第二个报文段的序号为x+1</li><li>确认号字段ack被设置为y+1，这是对TCP服务器进程所选择的初始序号的确认</li></ul><p>请注意：TCP规定普通的TCP确认报文段可以携带数据，但如果不携带数据，则不消耗序号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/9a1703b56fe9b83be48fff6de1bfb4533493119651743993.png" alt="image-20240618103347599" tabindex="0" loading="lazy"><figcaption>image-20240618103347599</figcaption></figure><blockquote><p>TCP服务器进程收到该确认报文段后也进入连接已建立状态</p><p>现在，TCP双方都进入了连接已建立状态，它们可以基于已建立好的TCP连接，进行可靠的数据传输</p></blockquote><p>为什么TCP客户进程最后还要发送一个普通的TCP确认报文段？能否使用“两报文握手”建立连接？</p><p>下图实例是“两报文握手”</p><figure><img src="https://i0.hdslb.com/bfs/article/209d8c55bdd48012ce14ede4895e324f3493119651743993.png" alt="image-20240618103354004" tabindex="0" loading="lazy"><figcaption>image-20240618103354004</figcaption></figure><blockquote><p>为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误”，这种情况是：一端(client)A发出去的第一个连接请求报文并没有&gt; 丢失，而是因为某些未知的原因在某个网络节点上发生滞留，导致延迟到连接释放以后的某个时间才到达另一端(server)B。本来这是一个&gt; 早已失效的报文段，但是B收到此失效的报文之后，会误认为是A再次发出的一个新的连接请求，于是B端就向A又发出确认报文，表示同&gt; 意建立连接。如果不采用“三次握手”，那么只要B端发出确认报文就会认为新的连接已经建立了，但是A端并没有发出建立连接的请求，因&gt; 此不会去向B端发送数据，B端没有收到数据就会一直等待，这样B端就会白白浪费掉很多资源。</p><p>所以并不<strong>多余</strong>，这是为了防止已失效的连接请求报文段突然又传送到了TCP服务器，因而导致错误</p></blockquote><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h4><figure><img src="https://i0.hdslb.com/bfs/article/bdb3f5fd6d0cc6a1e90dbf30204855f23493119651743993.png" alt="image-20240618103402137" tabindex="0" loading="lazy"><figcaption>image-20240618103402137</figcaption></figure><h3 id="tcp的连接释放" tabindex="-1"><a class="header-anchor" href="#tcp的连接释放" aria-hidden="true">#</a> TCP的连接释放</h3><ul><li>TCP 连接释放过程比较复杂。</li><li>数据传输结束后，通信的双方都可释放连接。</li><li>TCP 连接释放过程是<strong>四报文握手</strong>。</li></ul><h4 id="tcp通过-四报文挥手-来释放连接" tabindex="-1"><a class="header-anchor" href="#tcp通过-四报文挥手-来释放连接" aria-hidden="true">#</a> TCP通过“四报文挥手”来释放连接</h4><ul><li>TCP 连接的建立<strong>采用客户服务器方式</strong>。</li><li>主动发起连接建立的应用进程叫做<strong>TCP客户</strong> (client)。</li><li>被动等待连接建立的应用进程叫做<strong>TCP服务器</strong> (server)。</li><li><strong>任何一方都可以在数据传送结束后发出连接释放的通知</strong></li></ul><p>过程</p><figure><img src="https://i0.hdslb.com/bfs/article/9b210db53f8c5a4975c8172c07a8b52d3493119651743993.png" alt="image-20240618103408965" tabindex="0" loading="lazy"><figcaption>image-20240618103408965</figcaption></figure><blockquote><p>现在TCP客户进程和TCP服务器进程都处于连接已建立状态</p><p>TCP客户进程的应用进程通知其主动关闭TCP连接</p><p>TCP客户进程会发送TCP连接释放报文段，并进入终止等待1状态</p><p>TCP连接释放报文段首部中</p><ul><li>终止位FIN和确认为ACK的值都被设置为1，表明这是一个TCP连接释放报文段，同时也对之前收到的报文段进行确认</li><li>序号seq字段的值设置为u，它等于TCP客户进程之前已传送过的数据的最后一个字节的序号加1</li><li>确认号ack字段的值设置为v，它等于TCP客户进程之前已收到的、数据的最后一个字节的序号加1</li></ul><p>请注意：TCP规定终止位FIN等于1的报文段即使不携带数据，也要消耗掉一个序号</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/f8f4bda5b77ba63730e5ee6838d531d63493119651743993.png" alt="image-20240618103414713" tabindex="0" loading="lazy"><figcaption>image-20240618103414713</figcaption></figure><blockquote><p>TCP服务器进程收到TCP连接释放报文段后，会发送一个普通的TCP确认报文段并进入关闭等待状态</p><p>普通的TCP确认报文段首部中</p><ul><li>确认位ACK的值被设置为1，表明这是一个普通的TCP确认报文段</li><li>序号seq字段的值设置为v，它等于TCP服务器进程之前已传送过的数据的最后一个字节的序号加1，这也与之前收到的TCP连接释放报文段中的确认号匹配</li><li>确认号ack字段的值设置为u+1，这是对TCP连接释放报文段的确认</li></ul></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/3b20791774b1c269e29ebab1768b96933493119651743993.png" alt="image-20240618103420776" tabindex="0" loading="lazy"><figcaption>image-20240618103420776</figcaption></figure><blockquote><p>TCP服务器进程应该通知高层应用进程，TCP客户进程要断开与自己的TCP连接</p><p>此时，从TCP客户进程到TCP服务器进程这个方向的连接就释放了</p><p>这时的TCP连接属于半关闭状态，也就是TCP客户进程已经没有数据要发送了</p><p>但如果TCP服务器进程还有数据要发送，TCP客户进程仍要接收，也就是说从TCP服务器进程到TCP客户进程这个方向的连接并未关闭</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/7c29103b847eeb934b0b827dfe7a256a3493119651743993.png" alt="image-20240618103427261" tabindex="0" loading="lazy"><figcaption>image-20240618103427261</figcaption></figure><blockquote><p>TCP客户进程收到TCP确认报文段后就进入终止等待2状态，等待TCP服务器进程发出的TCP连接释放报文段</p><p>若使用TCP服务器进程的应用进程已经没有数据要发送了，应用进程就通知其TCP服务器进程释放连接</p><p>由于TCP连接释放是由TCP客户进程主动发起的，因此TCP服务器进程对TCP连接的释放称为被动关闭连接</p></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/6c48ac6a7318c0252b694d3a382af3163493119651743993.png" alt="image-20240618103435945" tabindex="0" loading="lazy"><figcaption>image-20240618103435945</figcaption></figure><blockquote><p>TCP服务器进程发送TCP连接释放报文段并进入最后确认状态</p><p>该报文段首部中</p><ul><li>终止位FIN和确认位ACK的值都被设置为1，表明这是一个TCP连接释放报文段，同时也对之前收到的报文段进行确认</li><li>序号seq字段的值为w，这是因为在半关闭状态下，TCP服务器进程可能又发送</li><li>确认号ack字段的值为u+1，这是对之前收到的TCP连接释放报文段的重复确认</li></ul></blockquote><figure><img src="https://i0.hdslb.com/bfs/article/39d70dcc779b567a6c0e0080933be5b83493119651743993.png" alt="image-20240618103441540" tabindex="0" loading="lazy"><figcaption>image-20240618103441540</figcaption></figure><blockquote><p>TCP客户进程收到TCP连接释放报文段后，必须针对该报文段发送普通的TCP确认报文段，之后进入时间等待状态</p><p>该报文段首部中</p><ul><li>确认为ACK的值被设置为1，表明这是一个普通的TCP确认报文段</li><li>序号seq字段的值设置为u+1，这是因为TCP客户进程之前发送的TCP连接释放报文段虽然不携带数据，但要消耗掉一个序号</li><li>确认号ack字段的值设置为w+1，这是对所收到的TCP连接释放报文段的确认</li></ul><p>TCP服务器进程收到该报文段后就进入关闭状态，而TCP客户进程还要进过2MSL后才能进入关闭状态</p></blockquote><p>TCP客户进程在发送完最后一个确认报文后，为什么不直接进入关闭状态？而是要进入时间等待状态？</p><figure><img src="https://i0.hdslb.com/bfs/article/d34c95a44905c1506506a12aa4dad05e3493119651743993.png" alt="image-20240618103512874" tabindex="0" loading="lazy"><figcaption>image-20240618103512874</figcaption></figure><blockquote><p>因为时间等待状态以及处于该状态2MSL时长，可以确保TCP服务器进程可以收到最后一个TCP确认报文段而进入关闭状态</p><p>另外，TCP客户进程在发送完最后一个TCP确认报文段后，在经过2MSL时长，就可以使本次连接持续时间内所产生的所有报文段都从网络中消失，这样就可以使下一个新的TCP连接中，不会出现旧连接中的报文段</p></blockquote><h4 id="tcp保活计时器的作用" tabindex="-1"><a class="header-anchor" href="#tcp保活计时器的作用" aria-hidden="true">#</a> TCP保活计时器的作用</h4><p>TCP双方已经建立了连接，后来，TCP客户进程所在的主机突然出现了故障</p><p>TCP服务器进程以后就不能再收到TCP客户进程发来的数据</p><p>因此，应当有措施使TCP服务器进程不要再白白等待下去</p><figure><img src="https://i0.hdslb.com/bfs/article/dfc12a69f1d906acaf53f33790270db63493119651743993.png" alt="image-20240618103459799" tabindex="0" loading="lazy"><figcaption>image-20240618103459799</figcaption></figure><h2 id="_9-tcp报文段的首部格式" tabindex="-1"><a class="header-anchor" href="#_9-tcp报文段的首部格式" aria-hidden="true">#</a> 9.TCP报文段的首部格式</h2><figure><img src="https://i0.hdslb.com/bfs/article/7f59864f2af76860f0a035e2b24191cb3493119651743993.png" alt="image-20240618103520586" tabindex="0" loading="lazy"><figcaption>image-20240618103520586</figcaption></figure><h3 id="_9-1-各字段的作用" tabindex="-1"><a class="header-anchor" href="#_9-1-各字段的作用" aria-hidden="true">#</a> 9.1 各字段的作用</h3><p>源端口和目的端口</p><figure><img src="https://i0.hdslb.com/bfs/article/e2a00702b3c7c4c3a7b326f8ad90aa2b3493119651743993.png" alt="image-20240618103526110" tabindex="0" loading="lazy"><figcaption>image-20240618103526110</figcaption></figure><p>序号、确认号和确认标志位</p><figure><img src="https://i0.hdslb.com/bfs/article/199293684861648c98daf031660edc4b3493119651743993.png" alt="image-20240618103551099" tabindex="0" loading="lazy"><figcaption>image-20240618103551099</figcaption></figure><p>数据偏移、保留、窗口和校验和</p><figure><img src="https://i0.hdslb.com/bfs/article/6ba6a9fee62bbbad5dbda0de9d7572513493119651743993.png" alt="image-20240618103540678" tabindex="0" loading="lazy"><figcaption>image-20240618103540678</figcaption></figure><p>同步标志位、终止标志位、复位标志位、推送标志位、紧急标志位和紧急指针</p><figure><img src="https://i0.hdslb.com/bfs/article/101c64c786b2feaa92f77a0d4334d0003493119651743993.png" alt="image-20240618103601953" tabindex="0" loading="lazy"><figcaption>image-20240618103601953</figcaption></figure><p>选项和填充</p><figure><img src="https://i0.hdslb.com/bfs/article/bd0ee7c7e015e9c08022f4c94d762d733493119651743993.png" alt="image-20240618103619406" tabindex="0" loading="lazy"><figcaption>image-20240618103619406</figcaption></figure></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><!----></div></footer><nav class="vp-page-nav"><a href="/myblog/professional_knowledge/computer_network/04.html" class="nav-link prev" aria-label="04 【计算机网络-网络层】"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->04 【计算机网络-网络层】</div></a><a href="/myblog/professional_knowledge/computer_network/06.html" class="nav-link next" aria-label="06 【计算机网络-应用层】"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">06 【计算机网络-应用层】<!----></div></a></nav><div class="waline-wrapper" id="comment" darkmode="false" style="display:block;"><div data-waline provider="Waline" pageview="true"><div class="wl-reaction"><div class="wl-reaction-title">已到达文章底部，欢迎留言、表情互动~</div><ul class="wl-reaction-list"><!--[--><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f44d.png" alt="赞一个"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">赞一个</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f44f.png" alt="支持下"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">支持下</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f60e.png" alt="有点酷"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">有点酷</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f602.png" alt="啥玩意"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">啥玩意</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f635-200d-1f4ab.png" alt="看不懂"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">看不懂</div></li><!--]--></ul></div><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">邮箱</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">网址</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="请留言。(填写邮箱可在被回复时收到邮件提醒)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="表情" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="预览"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  字</div><button type="button" class="wl-btn">登录</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> 评论</div><ul class="wl-sort"><!--[--><li class="active">按正序</li><li class="">按倒序</li><li class="">按热度</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.8</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><!----></footer></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/myblog/assets/app-1c846d8b.js" defer></script>
    <script
      src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-y/instant.page/5.1.0/instantpage.min.js"
      type="application/javascript"
    ></script>
  </body>
</html>
